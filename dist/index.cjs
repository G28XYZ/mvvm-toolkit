"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("reflect-metadata");const u=require("./tslib.es6--9daFdVU.cjs"),X=require("lodash"),p=require("mobx"),Y=require("immer"),Ne=require("mobx-react"),Ae=require("react"),x=(e,t,n)=>Reflect.getOwnMetadata(e,t)||n||{},V=(e,t,n)=>Reflect.defineMetadata(e,t,n);function Be(...e){try{return JSON.stringify(e),!0}catch{return!1}}function Le(e){if(e&&typeof e=="string"){let[t]=e.split(`
`)[2].replace(/at (get)?/,"").match(/.*/g)||[];return t&&(t=t.trim()),t}}const Ee={},ue=[];let Re=!1;const Ye=(e,...t)=>{const n=new Error().stack;if(!Re)console.log("%c TODO","background: #222; color: #bada55",Ee),Re=!0;else{const s=Le(n);ue.includes(s)===!1&&(ue.push(s),Reflect.set(Ee,`${ue.length}) ${e}`,{msg:t,get path(){return console.info(t,s),s}}))}function r(...s){}return r},K=(e,t)=>!!e&&(typeof t=="string"||typeof t=="symbol"),H=e=>!!e&&typeof e=="object"&&"kind"in e,Ue=e=>({kind:"class",name:e,addInitializer:()=>{},metadata:{}}),$=Symbol("service-key"),_e=new Proxy({},Reflect);function ze(e){const t=(r,s)=>{Object.defineProperty(r,s,{configurable:!0,enumerable:!0,get(){if(Object.prototype.hasOwnProperty.call(this,s))return Reflect.get(this,s);const a=W(e,"instance");if(a)return Object.defineProperty(this,s,{value:a,writable:!0,configurable:!0,enumerable:!0}),a},set(a){const o=W(e,"instance");Object.defineProperty(this,s,{value:o??a,writable:!0,configurable:!0,enumerable:!0})}})};function n(r,s){if(K(r,s)){t(r,s);return}return s.addInitializer(function(){return u.__awaiter(this,void 0,void 0,function*(){const a=W(e,"instance");a&&Object.hasOwn(this,s.name)&&Reflect.set(this,s.name,a)})}),a=>a}return n}function W(e,t){var n;const r=x($,_e);if(typeof e!="string"){const s=x($,e);if(s)return t&&t in s?s[t]:s;for(const a in r){const o=r[a];if(o.target===e){e=o.context.name;break}}}if(typeof e=="string")return t?(n=r[e])===null||n===void 0?void 0:n[t]:r[e]}function Me(e,t){const n=(s,a)=>{const o=String(typeof e=="string"&&e||typeof e=="object"&&e?.id||a?.name||s?.name),l=x($,_e),c=new Proxy({target:s,instance:typeof e=="object"&&Reflect.get(e,"transient")||typeof e=="object"&&Reflect.get(e,"lazy")?s:new s,context:a,options:e},{get(h,m,g){var w,M;if(m==="instance"&&(!((w=h?.options)===null||w===void 0)&&w.transient))return new s;if(m==="instance"&&(!((M=h?.options)===null||M===void 0)&&M.lazy)&&h.instance===s){const k=new s;return Reflect.set(h,m,k,g),k}return Reflect.get(h,m,g)},set(h,m,g,w){return Reflect.set(h,m,g,w)}});l[o]=c,V($,l,_e),V($,l[o],s)};function r(s,a){var o,l;const c=s.__legacy_source__,h=H(a)?a:Ue((l=(o=c?.name)!==null&&o!==void 0?o:s?.name)!==null&&l!==void 0?l:"");n(s,h),c&&c!==s&&V($,x($,s),c)}return X.isFunction(e)?r(e,t):e?(s,a)=>r(s,a):r}const $e=(e,t)=>{const{kind:n="class",name:r="",addInitializer:s=()=>{},metadata:a}=t?.ctx||{};return Me(t)(e,{kind:n,name:r,addInitializer:s,metadata:a}),W(e).instance};function he(e){var t,n,r;const s=Object.assign({enumerable:!1,writable:!0},e),a=Object.assign({configurable:!0,enumerable:!1,writable:!0},e),o={configurable:(t=a.configurable)!==null&&t!==void 0?t:!0,enumerable:(n=a.enumerable)!==null&&n!==void 0?n:!1,writable:(r=a.writable)!==null&&r!==void 0?r:!0,value:void 0};return function(l,c){if(K(l,c)){Object.defineProperty(l,c,{configurable:!0,enumerable:s.enumerable,get(){},set(h){o.value=h,Object.defineProperty(this,c,o),o.value=void 0}});return}if(H(c)){const h=c;return h.kind==="field"?function(m){return o.value=m,Object.defineProperty(this,h.name,o),o.value=void 0,m}:(h.addInitializer(function(){const m=Object.getOwnPropertyDescriptor(this,h.name);m&&Object.defineProperty(this,h.name,Object.assign(Object.assign({},m),{enumerable:s.enumerable}))}),l)}}}function Qe(e,t){return K(e,t)||H(t)?he()(e,t):he(e)}function Je(e,t){const n=a=>class extends a{constructor(...o){super(...o),p.makeObservable(this)}},r=(a,o)=>{if(typeof Reflect?.getOwnMetadataKeys=="function")for(const l of Reflect.getOwnMetadataKeys(a)){const c=Reflect.getOwnMetadata(l,a);Reflect.defineMetadata(l,c,o)}};function s(a,o){if(!H(o)){const l=a,c=n(l);return Object.defineProperty(c,"__legacy_source__",{value:l,configurable:!0}),r(l,c),c}o.addInitializer(function(){p.makeObservable(this)})}return e&&!H(t)||e?s(e,t):s}const U=Symbol("field-key"),Z=Symbol("validation-key"),ee=Symbol("submit-key"),te=Symbol("exclude-key"),Xe=Symbol("prop-from-view-key");class Q{isPrototypeObject(t){const n=t?.constructor;return!!(n&&n.prototype===t)}getCacheTarget(t){return!t||typeof t!="object"?null:this.isPrototypeObject(t)?t:Object.getPrototypeOf(t)}computeFromPrototype(t){const n=[],r=new Map,s=new Set;let a=t;for(;a;){const l=Reflect.getOwnMetadata(this.metadataKey,a);if(Array.isArray(l))for(const c of l){const h=c?.name,m=String(h);s.has(m)||(s.add(m),n.push(c),r.set(m,c))}a=Object.getPrototypeOf(a)}return{ownRef:Reflect.getOwnMetadata(this.metadataKey,t),list:n,map:r}}constructor(t={}){this.metadataKey=null,this.isInit=!1,this.cache=new WeakMap,this.name=t?.name,this.callback=t?.callback}isInstance(t={}){return t instanceof Q||Object.getOwnPropertyNames(this).some(n=>Object.keys(t).includes(n))}fieldInstance(t,n){const r=n&&typeof n=="object"?Reflect.getOwnMetadata(this.metadataKey,n):void 0;if(Array.isArray(r))return r.find(l=>l.name===t);const s=this.getCacheTarget(n);if(!s)return;const a=Reflect.getOwnMetadata(this.metadataKey,s),o=this.cache.get(s);if(!o||o.ownRef!==a){const l=this.computeFromPrototype(s);return this.cache.set(s,l),l.map.get(String(t))}return o.map.get(String(t))}fields(t){const n=t&&typeof t=="object"?Reflect.getOwnMetadata(this.metadataKey,t):void 0;if(Array.isArray(n)){const l=[],c=new Set;let h=t;for(;h;){const m=Reflect.getOwnMetadata(this.metadataKey,h);if(Array.isArray(m))for(const g of m){const w=g?.name,M=String(w);c.has(M)||(c.add(M),l.push(g))}h=Object.getPrototypeOf(h)}return l}const r=this.getCacheTarget(t);if(!r)return[];const s=Reflect.getOwnMetadata(this.metadataKey,r),a=this.cache.get(r);if(a&&a.ownRef===s)return a.list;const o=this.computeFromPrototype(r);return this.cache.set(r,o),o.list}}class ve extends Q{constructor(){super(...arguments),this.metadataKey=Z}}class ye extends Q{constructor(){super(...arguments),this.metadataKey=ee}}class me extends Q{constructor(){super(...arguments),this.metadataKey=te}}class ge extends Q{constructor(t={}){super(t),this.factory=null,this.mapping=null,this.noObserve=null,this.collectChanges=!1,this.name=null,this.ctx=null,this.metadataKey=U,this.isInit=!1,this.factory=t.factory,this.mapping=t.mapping,this.noObserve=t.noObserve,this.name=t.name,this.ctx=t.ctx,this.collectChanges=!!t.collectChanges}}class be extends Q{constructor(t={}){super(t),this.metadataKey=Xe;for(const n in this)t&&n in t&&(this[n]=Reflect.get(t,n))}}function Ze(e){const t=(s,a)=>{const o=new be({name:e,originName:String(a)});o.name=e,o.originName=String(a);const l=x(o.metadataKey,s,new Array);V(o.metadataKey,[...l,o],s)},n=s=>{s.addInitializer(function(){const a=new be,o=a.fields(this);for(const l in this)o instanceof Array&&s.name===l&&(a.name=e,a.originName=l,a.value=this[l],o.push(a));V(a.metadataKey,o,this)})};function r(s,a){if(K(s,a)){t(s,a);return}if(H(a))return n(a),a.kind==="field"?o=>o:a}return e?((s,a)=>r(s,a)):(s=>s)}const Te=new WeakMap,et=(e,t)=>{if(!e)return;let n=Te.get(e);n||(n=new Set,Te.set(e,n));const r=String(t.name);if(n.has(r))return;const s=x(t.metadataKey,e,new Array);s.some(a=>a.name===r)||V(t.metadataKey,[...s,t],e),n.add(r)};function tt(e){const t=(s,a)=>{const o=new me({callback:e,name:String(a)}),l=x(o.metadataKey,s,new Array);V(o.metadataKey,[...l,o],s)},n=s=>{s.addInitializer(function(){const a=new me({callback:e,name:String(s.name)});et(Object.getPrototypeOf(this),a)})};function r(s,a){if(K(s,a)){t(s,a);return}if(H(a))return n(a),a.kind==="field"?void 0:a}if(e)return((s,a)=>r(s,a))}const it=()=>{var e;return(e=globalThis.__REDUX_DEVTOOLS_EXTENSION__)!==null&&e!==void 0?e:null},st=()=>{var e;return(e=globalThis.__MVVM_DEVTOOLS_APPLYING__)!==null&&e!==void 0?e:0},ae=e=>{var t,n;const r=globalThis;r.__MVVM_DEVTOOLS_APPLYING__=((t=r.__MVVM_DEVTOOLS_APPLYING__)!==null&&t!==void 0?t:0)+1;try{return e()}finally{r.__MVVM_DEVTOOLS_APPLYING__=Math.max(0,((n=r.__MVVM_DEVTOOLS_APPLYING__)!==null&&n!==void 0?n:1)-1)}},nt=()=>st()>0,Fe=e=>({data:e.service.dumpData,historyIndex:e.service.historyIndex}),He=(e,t={})=>{const n=it();if(!n)return()=>{};const r=n.connect({name:t.name,instanceId:t.instanceId});let s=!1;try{r.init(Fe(e))}catch{}const a=p.reaction(()=>Fe(e),l=>{var c;if(!(s||nt()))try{r.send({type:(c=t.actionType)!==null&&c!==void 0?c:"model:update"},l)}catch{}}),o=r.subscribe(l=>{var c;if(l.type!=="DISPATCH")return;const h=(c=l.payload)===null||c===void 0?void 0:c.type;if(h==="RESET"){s=!0,ae(()=>{try{e.service.toInit()}finally{s=!1}});return}if(h==="COMMIT"){s=!0,ae(()=>{try{e.service.commit()}finally{s=!1}});return}if(h==="ROLLBACK"){s=!0,ae(()=>{try{e.service.toInit()}finally{s=!1}});return}if(h==="JUMP_TO_ACTION"||h==="JUMP_TO_STATE"){if(!l.state)return;try{const m=JSON.parse(l.state),g=m.historyIndex,w=e.service.history,M=Array.isArray(w)&&w.length>0,k=typeof g=="number"&&(g===-1&&M||g>=0&&M&&g<w.length);s=!0,ae(()=>{var R;try{if(k){e.service.goToHistory(g);return}const A=(R=m.data)!==null&&R!==void 0?R:m;p.runInAction(()=>{e.service.loadData(A)})}finally{s=!1}})}catch{}}});return()=>{a(),typeof o=="function"&&o(),typeof r.unsubscribe=="function"&&r.unsubscribe(),typeof r.disconnect=="function"&&r.disconnect()}};Y.enablePatches();const at=new ye,rt=new ge,ot=new ve,lt=new me;let Ge=(()=>{var e,t,n,r,s,a,o,l,c,h,m,g,w,M,k,R,A,L,q,T,P,d,I;let S=[],F,E=[],C=[],z,N,B,J,ie,se,ne,Oe,Se,we,De,Ie;return e=class{get[(t=new WeakMap,n=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,m=new WeakMap,g=new WeakMap,w=new WeakMap,M=new WeakMap,k=new WeakMap,R=new WeakMap,A=new WeakMap,L=Y.immerable)](){return u.__classPrivateFieldGet(this,t,"f")}set[L](i){u.__classPrivateFieldSet(this,t,i,"f")}get initData(){return u.__classPrivateFieldGet(this,n,"f")}set initData(i){u.__classPrivateFieldSet(this,n,i,"f")}get committedData(){return u.__classPrivateFieldGet(this,r,"f")}set committedData(i){u.__classPrivateFieldSet(this,r,i,"f")}get modified_(){return u.__classPrivateFieldGet(this,s,"f")}set modified_(i){u.__classPrivateFieldSet(this,s,i,"f")}get draft(){return u.__classPrivateFieldGet(this,a,"f")}set draft(i){u.__classPrivateFieldSet(this,a,i,"f")}get changes(){return u.__classPrivateFieldGet(this,o,"f")}set changes(i){u.__classPrivateFieldSet(this,o,i,"f")}get inverseChanges(){return u.__classPrivateFieldGet(this,l,"f")}set inverseChanges(i){u.__classPrivateFieldSet(this,l,i,"f")}get history(){return u.__classPrivateFieldGet(this,c,"f")}set history(i){u.__classPrivateFieldSet(this,c,i,"f")}get historyIndex(){return u.__classPrivateFieldGet(this,h,"f")}set historyIndex(i){u.__classPrivateFieldSet(this,h,i,"f")}get legacyInitDone(){return u.__classPrivateFieldGet(this,m,"f")}set legacyInitDone(i){u.__classPrivateFieldSet(this,m,i,"f")}get options(){return u.__classPrivateFieldGet(this,g,"f")}set options(i){u.__classPrivateFieldSet(this,g,i,"f")}get historyMuted(){return u.__classPrivateFieldGet(this,w,"f")}set historyMuted(i){u.__classPrivateFieldSet(this,w,i,"f")}get[q=(F=[p.observable],U)](){return u.__classPrivateFieldGet(this,M,"f")}set[q](i){u.__classPrivateFieldSet(this,M,i,"f")}get[T=ee](){return u.__classPrivateFieldGet(this,k,"f")}set[T](i){u.__classPrivateFieldSet(this,k,i,"f")}get[P=te](){return u.__classPrivateFieldGet(this,R,"f")}set[P](i){u.__classPrivateFieldSet(this,R,i,"f")}get[d=Z](){return u.__classPrivateFieldGet(this,A,"f")}set[d](i){u.__classPrivateFieldSet(this,A,i,"f")}constructor(i={},f){t.set(this,(u.__runInitializers(this,S),!0)),n.set(this,u.__runInitializers(this,E,null)),r.set(this,(u.__runInitializers(this,C),{})),s.set(this,{}),a.set(this,null),o.set(this,[]),l.set(this,[]),c.set(this,[]),h.set(this,-1),m.set(this,!1),g.set(this,{}),w.set(this,!1),M.set(this,void 0),k.set(this,void 0),R.set(this,void 0),A.set(this,void 0),this.options=f,this[Y.immerable]=!0,this.init(i),this.initLegacyFields(),this.autoAttachDevtools()}getFieldMetaCache(){const i=Reflect.getOwnMetadata(U,this),f=Object.getPrototypeOf(this),_=f?Reflect.getOwnMetadata(U,f):null,v=this[U];if(v&&v!==!0&&v.ownRef===i&&v.protoRef===_)return v;const D=rt.fields(this),b=new Map;for(const y of D)b.set(String(y.name),y);return this[U]={ownRef:i,protoRef:_,list:D,map:b},this[U]}getFieldMeta(i){return this.getFieldMetaCache().map.get(String(i))}getSubmitMetaCache(){const i=Reflect.getOwnMetadata(ee,this),f=Object.getPrototypeOf(this),_=f?Reflect.getOwnMetadata(ee,f):null,v=this[ee];if(v&&v!==!0&&v.ownRef===i&&v.protoRef===_)return v;const D=at.fields(this),b=new Map;for(const O of D)b.set(String(O.name),O);const y={ownRef:i,protoRef:_,list:D,map:b};return this[ee]=y,y}getExcludeMetaCache(){const i=Reflect.getOwnMetadata(te,this),f=Object.getPrototypeOf(this),_=f?Reflect.getOwnMetadata(te,f):null,v=this[te];if(v&&v!==!0&&v.ownRef===i&&v.protoRef===_)return v;const D=lt.fields(this),b=new Map;for(const O of D)b.set(String(O.name),O);const y={ownRef:i,protoRef:_,list:D,map:b};return this[te]=y,y}getValidationMetaCache(){const i=Reflect.getOwnMetadata(Z,this),f=Object.getPrototypeOf(this),_=f?Reflect.getOwnMetadata(Z,f):null,v=this[Z];if(v&&v!==!0&&v.ownRef===i&&v.protoRef===_)return v;const D=ot.fields(this),b=new Map;for(const O of D)b.set(String(O.name),O);const y={ownRef:i,protoRef:_,list:D,map:b};return this[Z]=y,y}initValidation(i){const f=this.validation;if(i)Reflect.get(f,i);else for(let _ in f)f[_]}init(i={}){this.cloneForInit(i),this.createDraft(i),this.defineData(this.initData)}initField(i,f){const _=this.getFieldMeta(i);if(_){const v=String(_.name);Object.prototype.hasOwnProperty.call(this.initData,v)||Reflect.set(this.initData,v,Reflect.get(this,v));let b=_?.factory?_.factory(this.initData,this):Reflect.get(this.initData,v);if(b===void 0&&!_?.factory){const y=Reflect.get(this,v);y!==void 0&&(b=y,Reflect.set(this.initData,v,y))}this.defineFieldValue(i,b,_),f?.skipValidation||this.initValidation(i)}}initLegacyFields(){if(this.legacyInitDone)return;const i=this.getFieldMetaCache().list;if(i.some(f=>Object.prototype.hasOwnProperty.call(this,f.name))){this.legacyInitDone=!0;for(let f of i){const _=String(f.name);this.initData&&_ in this.initData||this.initField(_,{skipValidation:!0})}}}createDraft(i){this.draft=Y.createDraft(i)}autoAttachDevtools(){var i,f,_,v,D,b,y,O,G,le,ce;const de=globalThis;if(!de.__MVVM_DEVTOOLS_AUTO__||((f=(i=this.options)===null||i===void 0?void 0:i.devtools)===null||f===void 0?void 0:f.enabled)===!1)return;const Pe=(y=(D=(v=(_=this.options)===null||_===void 0?void 0:_.devtools)===null||v===void 0?void 0:v.name)!==null&&D!==void 0?D:(b=this.constructor)===null||b===void 0?void 0:b.name)!==null&&y!==void 0?y:"Model",ke=((O=de.__MVVM_DEVTOOLS_SEQ__)!==null&&O!==void 0?O:0)+1;de.__MVVM_DEVTOOLS_SEQ__=ke,He(this,{name:Pe,instanceId:(ce=(le=(G=this.options)===null||G===void 0?void 0:G.devtools)===null||le===void 0?void 0:le.instanceId)!==null&&ce!==void 0?ce:`${Pe}#${ke}`})}withHistoryMuted(i){this.historyMuted=!0;try{i()}finally{this.historyMuted=!1}}syncChangesFromHistory(){const i=this.historyIndex>=0?this.history.slice(0,this.historyIndex+1):[];this.changes=i.flatMap(f=>f.patches),this.inverseChanges=i.flatMap(f=>f.inversePatches)}applyHistoryPatches(i){if(!i.length)return;Y.applyPatches(this.draft,i);const f=new Set(i.map(_=>_.field).filter(Boolean));f.size!==0&&this.withHistoryMuted(()=>{var _;for(let v of f){const D=(_=Reflect.get(this.draft,v))!==null&&_!==void 0?_:Reflect.get(this.initData,v);Reflect.set(this,v,D),this.defineFieldValue(v,Reflect.get(this,v))}})}produceDraft(i,f,_){if(this.historyMuted)return;let v,D=[];i&&(v=i.split(".")[0],v&&!this.getFieldMeta(v).collectChanges)||(Y.produce(this.draft,b=>{if(i){let y=b;const O=i.split(".");if(O.length>1)for(let G=0;G<O.length&&!(G!=O.length-1&&!X.isObject(y));G++)X.isObject(y)&&(y=y[O[G]]);else _=i;y&&(y[_]=f)}},(b,y)=>{v&&(b=b.map(O=>Object.assign(Object.assign({},O),{field:v})),y=y.map(O=>Object.assign(Object.assign({},O),{field:v}))),D=b,!(!b.length&&!y.length)&&(this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1),this.syncChangesFromHistory()),this.changes.push(...b),this.inverseChanges.push(...y),this.history.push({patches:b,inversePatches:y}),this.historyIndex=this.history.length-1)}),D.length&&Y.applyPatches(this.draft,D))}createObservable(i,f,_,v=_){return i=p.isObservable(i)?i:p.observable.box(i),new Proxy(i,{get:(D,b,y)=>{const O=Reflect.get(D,b,y);return O&&typeof O=="object"&&!(O instanceof e)&&!p.isObservable(i)?this.createObservable(O,String(b),f,`${v}.${String(b)}`):O},set:(D,b,y,O)=>(i=y,this.produceDraft(v,i,String(b)),this.checkChange(_,Reflect.get(this,_)),Reflect.set(D,b,y,O))})}defineFieldValue(i,f,_){const v=_??this.getFieldMeta(i);return v.noObserve?Reflect.defineProperty(this,v.name,{value:f}):(f=p.observable.box(f),Reflect.defineProperty(this,v.name,{get:()=>f.get(),set:D=>{p.runInAction(()=>f.set(D)),this.produceDraft(v.name,f.get()),this.checkChange(v.name,f.get())},enumerable:!0,configurable:!0})),f}cloneForInit(i={}){this.initData=i}checkChange(i,f){const _=Reflect.get(this.committedData,i)||Reflect.get(this.initData,i),v=i&&i in this.initData&&!X.isEqual(_,f);return p.runInAction(()=>{if(v){Reflect.set(this.modified_,i,_);return}i in this.modified_&&X.isEqual(_,f)&&delete this.modified_[i]}),v}defineData(i){const f=this.getFieldMetaCache().map;for(let _ in this)Object.prototype.hasOwnProperty.call(this,_)&&f.has(_)&&(Reflect.set(this,_,Reflect.get(i,_)),this.initField(_))}get dirty(){return!X.isEmpty(this.modified_)}commit(){for(let i of this.getFieldMetaCache().list)this.commitField(i.name);this.modified_={}}commitField(i){for(let f in this)f in this.modified_&&Reflect.set(this.committedData,f,this[f]);delete this.modified_[i],this.modified_=Object.assign({},this.modified_)}reject(){for(let i in this)i in this.modified_&&(this[i]=Reflect.get(this.modified_,i),this.commitField(i),this.defineFieldValue(i,this[i]));this.commit()}toInit(){return this.withHistoryMuted(()=>{this.init(this.initData)}),this}undo(){this.historyIndex<0||(this.applyHistoryPatches(this.history[this.historyIndex].inversePatches),this.historyIndex-=1,this.syncChangesFromHistory())}redo(){this.historyIndex>=this.history.length-1||(this.historyIndex=this.historyIndex+1,this.applyHistoryPatches(this.history[this.historyIndex].patches),this.syncChangesFromHistory())}goToHistory(i){if(!(i<-1||i>=this.history.length)&&i!==this.historyIndex){for(;this.historyIndex<i;)this.historyIndex=this.historyIndex+1,this.applyHistoryPatches(this.history[this.historyIndex].patches);for(;this.historyIndex>i;)this.applyHistoryPatches(this.history[this.historyIndex].inversePatches),this.historyIndex-=1;this.syncChangesFromHistory()}}loadData(i){return this.withHistoryMuted(()=>{this.init(i)}),this}get dumpData(){this.initLegacyFields();const i=Object.create({}),f=this.getSubmitMetaCache().map,_=this.getExcludeMetaCache().map,v=b=>{const y=Reflect.get(this,b),O=f.get(b),G=O?.callback;return typeof G=="function"?G(y,this):y},D=b=>{const y=_.get(b);if(y)switch(typeof y.callback){case"boolean":return!!y.callback;case"function":return y.callback(Reflect.get(this,b),this)}return!1};return this.getFieldMetaCache().list.forEach(b=>{var y;if(b.name in this)return!((y=this.options)===null||y===void 0)&&y.byFields&&!this.options.byFields.includes(b.name)||D(b.name)?void 0:Reflect.set(i,b.name,v(b.name))}),i}get validation(){this.initLegacyFields();const i={};for(const f of this.getValidationMetaCache().list){const _=String(f.name);Reflect.set(i,_,f.callback(Reflect.get(this,_),this)||"")}return i}get validAndDirty(){return this.dirty&&Object.values(this.validation).filter(Boolean).length===0}get serviceApi(){return{loadData:i=>this.loadData(i),reject:()=>this.reject(),commit:()=>this.commit(),commitField:i=>this.commitField(i),toInit:()=>this.toInit(),undo:()=>this.undo(),redo:()=>this.redo(),goToHistory:i=>this.goToHistory(i)}}get service(){return Object.assign({dirty:this.dirty,dumpData:this.dumpData,validation:this.validation,changes:this.changes,inverseChanges:this.inverseChanges,history:this.history,historyIndex:this.historyIndex},this.serviceApi)}},(()=>{const j=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;z=[p.action],N=[p.computed],B=[p.action],J=[p.action],ie=[p.action],se=[p.action],ne=[p.action],Oe=[p.action],Se=[p.action],we=[p.computed],De=[p.computed],Ie=[(I=p.computed).struct.bind(I)],u.__esDecorate(e,null,F,{kind:"accessor",name:"initData",static:!1,private:!1,access:{has:i=>"initData"in i,get:i=>i.initData,set:(i,f)=>{i.initData=f}},metadata:j},E,C),u.__esDecorate(e,null,z,{kind:"method",name:"produceDraft",static:!1,private:!1,access:{has:i=>"produceDraft"in i,get:i=>i.produceDraft},metadata:j},null,S),u.__esDecorate(e,null,N,{kind:"getter",name:"dirty",static:!1,private:!1,access:{has:i=>"dirty"in i,get:i=>i.dirty},metadata:j},null,S),u.__esDecorate(e,null,B,{kind:"method",name:"commit",static:!1,private:!1,access:{has:i=>"commit"in i,get:i=>i.commit},metadata:j},null,S),u.__esDecorate(e,null,J,{kind:"method",name:"commitField",static:!1,private:!1,access:{has:i=>"commitField"in i,get:i=>i.commitField},metadata:j},null,S),u.__esDecorate(e,null,ie,{kind:"method",name:"reject",static:!1,private:!1,access:{has:i=>"reject"in i,get:i=>i.reject},metadata:j},null,S),u.__esDecorate(e,null,se,{kind:"method",name:"toInit",static:!1,private:!1,access:{has:i=>"toInit"in i,get:i=>i.toInit},metadata:j},null,S),u.__esDecorate(e,null,ne,{kind:"method",name:"undo",static:!1,private:!1,access:{has:i=>"undo"in i,get:i=>i.undo},metadata:j},null,S),u.__esDecorate(e,null,Oe,{kind:"method",name:"redo",static:!1,private:!1,access:{has:i=>"redo"in i,get:i=>i.redo},metadata:j},null,S),u.__esDecorate(e,null,Se,{kind:"method",name:"goToHistory",static:!1,private:!1,access:{has:i=>"goToHistory"in i,get:i=>i.goToHistory},metadata:j},null,S),u.__esDecorate(e,null,we,{kind:"getter",name:"validation",static:!1,private:!1,access:{has:i=>"validation"in i,get:i=>i.validation},metadata:j},null,S),u.__esDecorate(e,null,De,{kind:"getter",name:"validAndDirty",static:!1,private:!1,access:{has:i=>"validAndDirty"in i,get:i=>i.validAndDirty},metadata:j},null,S),u.__esDecorate(e,null,Ie,{kind:"getter",name:"service",static:!1,private:!1,access:{has:i=>"service"in i,get:i=>i.service},metadata:j},null,S),j&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j})})(),e})();const ct=()=>{var e;const t=globalThis;return!!((e=t.__MVVM_DEVTOOLS_HISTORY__)!==null&&e!==void 0?e:t.__MVVM_DEVTOOLS_AUTO__)},dt=e=>ct()?!e||typeof e!="object"?{collectChanges:!0}:"collectChanges"in e?e:Object.assign(Object.assign({},e),{collectChanges:!0}):e,je=new WeakMap,ut=(e,t)=>{if(!e)return;let n=je.get(e);n||(n=new Set,je.set(e,n));const r=String(t.name);if(n.has(r))return;const s=x(t.metadataKey,e,new Array);s.some(a=>a.name===r)||V(t.metadataKey,[...s,t],e),n.add(r)},oe=function(t,n){const r=dt(K(t,n)?void 0:t),s=(l,c)=>{const h=new ge(Object.assign(Object.assign({},r),{name:String(c),ctx:null}));V(h.metadataKey,[...x(h.metadataKey,l,new Array),h],l),Object.getOwnPropertyDescriptor(l,c)||Object.defineProperty(l,c,{configurable:!0,enumerable:!0,get(){if(Object.prototype.hasOwnProperty.call(this,c))return Reflect.get(this,c);if(this.initData&&c in this.initData&&typeof this.initField=="function")return this.initField.call(this,String(c),{skipValidation:!0}),Reflect.get(this,c)},set(g){if(this.initData&&!(c in this.initData)&&Reflect.set(this.initData,c,g),typeof this.initField=="function"){this.initField.call(this,String(c),{skipValidation:!0});return}Object.defineProperty(this,c,{value:g,writable:!0,configurable:!0,enumerable:!0})}})},a=l=>{l.addInitializer(function(){if(this instanceof Ge&&typeof this.initField=="function"){const c=new ge(Object.assign(Object.assign({},r),{name:String(l.name),ctx:l}));ut(Object.getPrototypeOf(this),c),this.initField.call(this,String(l.name))}})};function o(l,c){if(K(l,c)){s(l,c);return}if(H(c))return a(c),c.kind==="field"?h=>h:c}return K(t,n)?o(t,n):r&&!H(n)?(l,c)=>o(l,c):H(n)?o(void 0,n):(l,c)=>o(l,c)},ht=e=>!e||typeof e!="object"?{noObserve:!0}:Object.assign(Object.assign({},e),{noObserve:!0}),ft=function(t,n){return K(t,n)||H(n)?oe({noObserve:!0})(t,n):oe(ht(t))};oe.noObserve=ft;const Ve=new WeakMap,_t=(e,t)=>{if(!e)return;let n=Ve.get(e);n||(n=new Set,Ve.set(e,n));const r=String(t.name);if(n.has(r))return;const s=x(t.metadataKey,e,new Array);s.some(a=>a.name===r)||V(t.metadataKey,[...s,t],e),n.add(r)};function vt(e){const t=(s,a)=>{const o=new ye({callback:e,name:String(a)}),l=x(o.metadataKey,s,new Array);V(o.metadataKey,[...l,o],s)},n=s=>{const a=new ye({callback:e,name:String(s.name)});s.addInitializer(function(){_t(Object.getPrototypeOf(this),a)})};function r(s,a){if(K(s,a)){t(s,a);return}if(H(a))return n(a),a.kind==="field"?o=>o:a}return e?((s,a)=>r(s,a)):(s=>s)}const Ce=new WeakMap,yt=(e,t)=>{if(!e)return;let n=Ce.get(e);n||(n=new Set,Ce.set(e,n));const r=String(t.name);if(n.has(r))return;const s=x(t.metadataKey,e,new Array);s.some(a=>a.name===r)||V(t.metadataKey,[...s,t],e),n.add(r)};function mt(e){const t=(s,a)=>{const o=new ve({callback:e,name:String(a)}),l=x(o.metadataKey,s,new Array);V(o.metadataKey,[...l,o],s)},n=s=>{const a=new ve({callback:e,name:String(s.name)});s.addInitializer(function(){yt(Object.getPrototypeOf(this),a)})};function r(s,a){if(K(s,a)){t(s,a);return}if(H(a))return n(a),a.kind==="field"?o=>o:a}return e?((s,a)=>r(s,a)):(s=>s)}const Ke=Symbol("store-key"),gt=()=>{var e;return(e=globalThis.__REDUX_DEVTOOLS_EXTENSION__)!==null&&e!==void 0?e:null},bt=()=>{var e;return(e=globalThis.__MVVM_DEVTOOLS_APPLYING__)!==null&&e!==void 0?e:0},pt=e=>{var t,n;const r=globalThis;r.__MVVM_DEVTOOLS_APPLYING__=((t=r.__MVVM_DEVTOOLS_APPLYING__)!==null&&t!==void 0?t:0)+1;try{return e()}finally{r.__MVVM_DEVTOOLS_APPLYING__=Math.max(0,((n=r.__MVVM_DEVTOOLS_APPLYING__)!==null&&n!==void 0?n:1)-1)}},Mt=()=>bt()>0,pe=e=>({items:e.items.map(t=>{var n,r;return{name:(r=(n=t.constructor)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"Model",data:t.service.dumpData,historyIndex:t.service.historyIndex}})}),Ot=e=>!!(e&&typeof e=="object"&&Array.isArray(e.items)),St=e=>{if(!e)return null;try{const t=JSON.parse(e);return Ot(t)?t:null}catch{return null}},qe=(e,t={})=>{var n,r;const s=gt();if(!s)return()=>{};const a=s.connect({name:t.name,instanceId:t.instanceId});let o=!1,l=(r=(n=e.items[0])===null||n===void 0?void 0:n.constructor)!==null&&r!==void 0?r:null;try{a.init(pe(e))}catch{}const c=p.reaction(()=>pe(e),g=>{var w;if(o||Mt())return;const M=(w=e.items[0])===null||w===void 0?void 0:w.constructor;M&&(l=M);try{a.send({type:"store:update"},g)}catch{}}),h=g=>(o=!0,pt(()=>{try{return g()}finally{o=!1}})),m=a.subscribe(g=>{var w;if(g.type!=="DISPATCH")return;const M=(w=g.payload)===null||w===void 0?void 0:w.type;if(M==="RESET"||M==="ROLLBACK"){h(()=>e.reset());return}if(M==="JUMP_TO_ACTION"||M==="JUMP_TO_STATE"){const k=St(g.state);if(!k)return;h(()=>{var R,A,L;if(k.items.length===e.items.length&&e.items.every(I=>{var S,F;return typeof((S=I?.service)===null||S===void 0?void 0:S.goToHistory)=="function"||typeof((F=I?.service)===null||F===void 0?void 0:F.loadData)=="function"})){p.runInAction(()=>{k.items.forEach((I,S)=>{var F;const E=(F=e.items[S])===null||F===void 0?void 0:F.service,C=I.historyIndex,z=E?.history;if(Array.isArray(z)&&z.length>0&&typeof C=="number"&&typeof E?.goToHistory=="function"&&(C===-1&&z.length>0||C<z.length)){E.goToHistory(C);return}typeof E?.loadData=="function"&&E.loadData(I.data)})});return}const T=(A=(R=e.items[0])===null||R===void 0?void 0:R.constructor)!==null&&A!==void 0?A:l,P=k.items.map(I=>I.data);if(T){e.applyLoaded(P,{model:T,cash:!1}),l=T;return}e.applyLoaded(P,{cash:!1});const d=(L=e.items[0])===null||L===void 0?void 0:L.constructor;d&&(l=d)})}});return()=>{c(),typeof m=="function"&&m(),typeof a.unsubscribe=="function"&&a.unsubscribe(),typeof a.disconnect=="function"&&a.disconnect()}};let wt=(()=>{var e,t,n;let r=[],s,a=[],o=[],l,c=[],h=[],m,g,w,M,k,R,A,L,q,T;return e=class{get items(){return u.__classPrivateFieldGet(this,t,"f")}set items(d){u.__classPrivateFieldSet(this,t,d,"f")}get _cash(){return u.__classPrivateFieldGet(this,n,"f")}set _cash(d){u.__classPrivateFieldSet(this,n,d,"f")}constructor(){t.set(this,(u.__runInitializers(this,r),u.__runInitializers(this,a,[]))),n.set(this,(u.__runInitializers(this,o),u.__runInitializers(this,c,[]))),u.__runInitializers(this,h),p.makeObservable(this),this.autoAttachDevtools()}add(d){this.items.push(d)}addMany(d){d?.length&&(this.items=this.items.concat(d))}remove(d){this.items=this.items.filter(I=>I!==d)}find(d){return this.items.find(d)}filter(d){return this.items.filter(d)}findBy(d,I){return this.items.find(S=>S?.[d]===I)}clear(){this.items=[]}get size(){return this.items.length}get snapshot(){return pe(this)}get cash(){return this._cash}reset(){this.clear()}applyLoaded(d,I={}){const{model:S,mode:F="replace",cash:E=!0}=I;if(E&&this.setCash(d),F==="append"){const C=S?d.map(z=>new S(z)):d;this.addMany(C);return}this.items=S?d.map(C=>new S(C)):d}setCash(d){this._cash=d??[]}autoAttachDevtools(){var d,I,S,F,E,C,z,N;const B=globalThis;if(!B.__MVVM_DEVTOOLS_AUTO__)return;const J=x(Ke,this.constructor,{})||{};if(((d=J.devtools)===null||d===void 0?void 0:d.enabled)===!1)return;const ie=(E=(S=(I=J.devtools)===null||I===void 0?void 0:I.name)!==null&&S!==void 0?S:(F=this.constructor)===null||F===void 0?void 0:F.name)!==null&&E!==void 0?E:"Store",se=((C=B.__MVVM_DEVTOOLS_STORE_SEQ__)!==null&&C!==void 0?C:0)+1;B.__MVVM_DEVTOOLS_STORE_SEQ__=se;const ne=(N=(z=J.devtools)===null||z===void 0?void 0:z.instanceId)!==null&&N!==void 0?N:`${ie}#${se}`;qe(this,{name:ie,instanceId:ne})}},t=new WeakMap,n=new WeakMap,(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[p.observable],l=[p.observable],m=[p.action],g=[p.action],w=[p.action],M=[p.action],k=[p.computed],R=[p.computed],A=[p.computed],L=[p.action],q=[p.action],T=[p.action],u.__esDecorate(e,null,s,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:d=>"items"in d,get:d=>d.items,set:(d,I)=>{d.items=I}},metadata:P},a,o),u.__esDecorate(e,null,l,{kind:"accessor",name:"_cash",static:!1,private:!1,access:{has:d=>"_cash"in d,get:d=>d._cash,set:(d,I)=>{d._cash=I}},metadata:P},c,h),u.__esDecorate(e,null,m,{kind:"method",name:"add",static:!1,private:!1,access:{has:d=>"add"in d,get:d=>d.add},metadata:P},null,r),u.__esDecorate(e,null,g,{kind:"method",name:"addMany",static:!1,private:!1,access:{has:d=>"addMany"in d,get:d=>d.addMany},metadata:P},null,r),u.__esDecorate(e,null,w,{kind:"method",name:"remove",static:!1,private:!1,access:{has:d=>"remove"in d,get:d=>d.remove},metadata:P},null,r),u.__esDecorate(e,null,M,{kind:"method",name:"clear",static:!1,private:!1,access:{has:d=>"clear"in d,get:d=>d.clear},metadata:P},null,r),u.__esDecorate(e,null,k,{kind:"getter",name:"size",static:!1,private:!1,access:{has:d=>"size"in d,get:d=>d.size},metadata:P},null,r),u.__esDecorate(e,null,R,{kind:"getter",name:"snapshot",static:!1,private:!1,access:{has:d=>"snapshot"in d,get:d=>d.snapshot},metadata:P},null,r),u.__esDecorate(e,null,A,{kind:"getter",name:"cash",static:!1,private:!1,access:{has:d=>"cash"in d,get:d=>d.cash},metadata:P},null,r),u.__esDecorate(e,null,L,{kind:"method",name:"reset",static:!1,private:!1,access:{has:d=>"reset"in d,get:d=>d.reset},metadata:P},null,r),u.__esDecorate(e,null,q,{kind:"method",name:"applyLoaded",static:!1,private:!1,access:{has:d=>"applyLoaded"in d,get:d=>d.applyLoaded},metadata:P},null,r),u.__esDecorate(e,null,T,{kind:"method",name:"setCash",static:!1,private:!1,access:{has:d=>"setCash"in d,get:d=>d.setCash},metadata:P},null,r),P&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),e})();function Dt(e){return W(e,"instance")}function It(e){return((t,n)=>ze(e)(t,n))}function Pt(e,t){const n=(r,s)=>{var a;const o=typeof e=="string"?{id:e}:typeof e=="object"?e:{id:(a=s?.name)!==null&&a!==void 0?a:r?.name};V(Ke,o,r),Me(o)(r,s)};return typeof e=="function"?n(e,t):(r,s)=>n(r,s)}class kt{}const fe=new be;function At(e,t){return Ne.observer((n={})=>{const{resolved:r,instance:s}=Ae.useMemo(()=>{const o=W(e)||(typeof e!="string"?{instance:new e}:void 0),l=o?.instance;return{resolved:o,instance:l}},[e]);if(Ae.useEffect(()=>{if(s)return typeof s.onInit=="function"&&s.onInit(),()=>{typeof s.onDispose=="function"&&s.onDispose()}},[s]),r){const a=fe.fields(s),o=a.length>0?a:fe.fields(Object.getPrototypeOf(s));for(const l in n)if(o instanceof Array){const c=o.find(h=>h.name===l);c&&Reflect.set(s,c.originName,Reflect.get(n,l))}return V(fe.metadataKey,o,s),t(Object.assign({viewModel:s},n))}return t(Object.assign({},n))})}const xe={load:"load",failure:"failure",ready:"ready",canceled:"canceled",disposed:"disposed"},Et={load:"load",failure:"failure",ready:"ready",canceled:"canceled",disposed:"disposed"},re=()=>{};class Rt{constructor(t,n){var r,s,a,o,l,c,h;this.isExecuting=!1,this.activeCount=0,this.isCanceled=!1,this.isDisposed=!1,this.error=null,this.controllers=new Set,this.queue=[],this.runningPromise=null,this.queueTail=Promise.resolve(),this.cancelToken=0,this.fn=t,this.opt=Object.assign({concurrency:(r=n?.concurrency)!==null&&r!==void 0?r:"ignore",trackError:(s=n?.trackError)!==null&&s!==void 0?s:!0,resetErrorOnExecute:(a=n?.resetErrorOnExecute)!==null&&a!==void 0?a:!0,swallowError:(o=n?.swallowError)!==null&&o!==void 0?o:!0,abortable:(l=n?.abortable)!==null&&l!==void 0?l:!1},n),this.states=Object.assign(Object.assign({},xe),(c=n?.states)!==null&&c!==void 0?c:{}),this.stateKeys=Object.assign(Object.assign({},Et),(h=n?.stateKeys)!==null&&h!==void 0?h:{}),p.makeAutoObservable(this,{fn:!1,opt:!1,states:!1,stateKeys:!1,resolveState:!1,getScope:!1,controllers:!1,queue:!1,runningPromise:!1,queueTail:!1,cancelToken:!1},{autoBind:!0})}get canExecute(){return this.isDisposed||!(this.opt.canExecute?this.opt.canExecute(this.getScope()):!0)?!1:this.opt.concurrency==="ignore"?!this.isExecuting:!0}resolveState(t){var n,r;const s=(n=this.stateKeys[t])!==null&&n!==void 0?n:t;return(r=this.states[s])!==null&&r!==void 0?r:xe[t]}getScope(){return{state:this.state,states:this.states,isExecuting:this.isExecuting,activeCount:this.activeCount,isCanceled:this.isCanceled,isDisposed:this.isDisposed,error:this.error}}get state(){return this.isDisposed?this.resolveState("disposed"):this.isExecuting?this.resolveState("load"):this.error?this.resolveState("failure"):this.isCanceled?this.resolveState("canceled"):this.resolveState("ready")}resetError(){this.error=null}cancel(){var t,n;this.cancelToken+=1,this.isCanceled=!0,(n=(t=this.opt).onCancel)===null||n===void 0||n.call(t),this.opt.cancelQueued&&this.clearQueue();for(const r of this.controllers)r.abort()}dispose(){this.isDisposed||(this.isDisposed=!0,this.clearQueue(),this.cancel())}clearQueue(){if(this.queue.length===0)return;const t=this.queue.splice(0,this.queue.length);for(const n of t)n.canceled=!0,n.settled||(n.settled=!0,n.resolve(void 0))}execute(...t){var n;if(this.isDisposed)return Promise.resolve(void 0);if(!this.canExecute)return(n=this.runningPromise)!==null&&n!==void 0?n:Promise.resolve(void 0);const r=a=>{this.runningPromise=a;const o=()=>{this.runningPromise===a&&(this.runningPromise=null)};return a.then(o,o),a},s=()=>u.__awaiter(this,void 0,void 0,function*(){var a,o,l,c,h,m,g,w;if(this.isDisposed)return;const M=this.opt.abortable?new AbortController:null;M&&this.controllers.add(M),p.runInAction(()=>{this.activeCount+=1,this.isExecuting=this.activeCount>0,this.isCanceled=!1,this.opt.trackError&&this.opt.resetErrorOnExecute&&(this.error=null)});const k=this.cancelToken;let R=!1,A=!1,L=null,q=null;try{(o=(a=this.opt).onStart)===null||o===void 0||o.call(a,...t);const T=this.opt.abortable?M.signal:void 0;q=this.fn(...t,T);const P=yield q;return A=this.cancelToken!==k,A?void 0:((c=(l=this.opt).onSuccess)===null||c===void 0||c.call(l,P,...t),R=!0,P)}catch(T){if(this.opt.abortable&&M?.signal.aborted){p.runInAction(()=>{this.isCanceled=!0}),A=!0,L=null;return}if(L=T,A=this.cancelToken!==k,this.opt.trackError&&p.runInAction(()=>{this.error=T}),(m=(h=this.opt).onError)===null||m===void 0||m.call(h,T),!this.opt.swallowError)throw T;return}finally{p.runInAction(()=>{this.activeCount=Math.max(0,this.activeCount-1),this.isExecuting=this.activeCount>0}),M&&this.controllers.delete(M),!A&&this.cancelToken!==k&&(A=!0),(w=(g=this.opt).onFinally)===null||w===void 0||w.call(g,{ok:R,canceled:A,error:L},...t)}});switch(this.opt.concurrency){case"parallel":return r(s());case"restart":return this.cancel(),r(s());case"queue":{const a=this.opt.queueLimit;if(typeof a=="number"&&a>0&&this.queue.length>=a)return Promise.resolve(void 0);const o={promise:Promise.resolve(void 0),resolve:re,reject:re,canceled:!1,settled:!1},l=this.activeCount===0&&this.queue.length===0;o.promise=new Promise((m,g)=>{o.resolve=m,o.reject=g}),this.queue.push(o);const c=()=>u.__awaiter(this,void 0,void 0,function*(){if(o.settled)return;if(o.canceled||this.isDisposed){o.settled=!0,o.resolve(void 0);return}const m=this.queue.indexOf(o);m>=0&&this.queue.splice(m,1);try{const g=yield s();o.settled||(o.settled=!0,o.resolve(g))}catch(g){o.settled||(o.settled=!0,o.reject(g))}}),h=l?c():this.queueTail.then(c,c);return this.queueTail=h.then(re,re),r(o.promise)}default:return this.isExecuting&&this.runningPromise?this.runningPromise:r(s())}}}function We(e,t){return new Rt(e,t)}function Tt(e,t){const n=p.flow(e),r=new Set,s=t?.onCancel;return We((...o)=>{const l=n(...o);r.add(l);const c=()=>{r.delete(l)};return l.then(c,c),new Promise((h,m)=>{l.then(h,g=>{if(p.isFlowCancellationError(g)){h(void 0);return}m(g)})})},Object.assign(Object.assign({},t),{onCancel:()=>{var o;for(const l of r)(o=l.cancel)===null||o===void 0||o.call(l);s?.()}}))}function Ft(e){return function(...t){return p.runInAction(()=>e.apply(this,t))}}exports.GetService=W;exports.GetStore=Dt;exports.Inject=ze;exports.InjectStore=It;exports.MakeObservable=Je;exports.Model=Ge;exports.PropFromView=Ze;exports.Service=Me;exports.SetService=$e;exports.Store=Pt;exports.StoreBase=wt;exports.TODO=Ye;exports.ViewModel=kt;exports.asyncCommand=We;exports.attachModelDevtools=He;exports.attachStoreDevtools=qe;exports.commandAction=Ft;exports.defineMetadata=V;exports.define_prop=Qe;exports.exclude=tt;exports.field=oe;exports.flowCommand=Tt;exports.getExecutingFunctionNameByStack=Le;exports.getOwnMetadata=x;exports.isSerializable=Be;exports.submit=vt;exports.validation=mt;exports.view=At;
//# sourceMappingURL=index.cjs.map
