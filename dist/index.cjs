"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("reflect-metadata");const c=require("./tslib.es6-DqNExo46.cjs"),Z=require("lodash"),v=require("mobx"),W=require("immer"),de=require("mobx-react"),Xt=require("react"),R=(e,i,r)=>Reflect.getOwnMetadata(e,i)||r||{},F=(e,i,r)=>Reflect.defineMetadata(e,i,r);function ue(...e){try{return JSON.stringify(e),!0}catch{return!1}}function se(e){if(e&&typeof e=="string"){let[i]=e.split(`
`)[2].replace(/at (get)?/,"").match(/.*/g)||[];return i&&(i=i.trim()),i}}const Zt={},lt=[];let te=!1;const he=(e,...i)=>{const r=new Error().stack;if(!te)console.log("%c TODO","background: #222; color: #bada55",Zt),te=!0;else{const s=se(r);lt.includes(s)===!1&&(lt.push(s),Reflect.set(Zt,`${lt.length}) ${e}`,{msg:i,get path(){return console.info(i,s),s}}))}function o(...s){}return o},G=(e,i)=>!!e&&(typeof i=="string"||typeof i=="symbol"),q=e=>!!e&&typeof e=="object"&&"kind"in e,fe=e=>({kind:"class",name:e,addInitializer:()=>{},metadata:{}}),Q=Symbol("service-key"),ut=new Proxy({},Reflect);function ne(e){const i=(o,s)=>{Object.defineProperty(o,s,{configurable:!0,enumerable:!0,get(){if(Object.prototype.hasOwnProperty.call(this,s))return Reflect.get(this,s);const n=N(e,"instance");if(n)return Object.defineProperty(this,s,{value:n,writable:!0,configurable:!0,enumerable:!0}),n},set(n){const a=N(e,"instance");Object.defineProperty(this,s,{value:a??n,writable:!0,configurable:!0,enumerable:!0})}})};function r(o,s){if(G(o,s)){i(o,s);return}return s.addInitializer(function(){return c.__awaiter(this,void 0,void 0,function*(){const n=N(e,"instance");n&&Object.hasOwn(this,s.name)&&Reflect.set(this,s.name,n)})}),n=>n}return r}function N(e,i){var r;const o=R(Q,ut);if(typeof e!="string"){const s=R(Q,e);if(s)return i&&i in s?s[i]:s;for(const n in o){const a=o[n];if(a.target===e){e=a.context.name;break}}}if(typeof e=="string")return i?(r=o[e])===null||r===void 0?void 0:r[i]:o[e]}function gt(e,i){const r=(s,n)=>{const a=String(typeof e=="string"&&e||typeof e=="object"&&e?.id||n?.name||s?.name),l=R(Q,ut),h=new Proxy({target:s,instance:typeof e=="object"&&Reflect.get(e,"transient")||typeof e=="object"&&Reflect.get(e,"lazy")?s:new s,context:n,options:e},{get(_,y,g){var D,b;if(y==="instance"&&(!((D=_?.options)===null||D===void 0)&&D.transient))return new s;if(y==="instance"&&(!((b=_?.options)===null||b===void 0)&&b.lazy)&&_.instance===s){const T=new s;return Reflect.set(_,y,T,g),T}return Reflect.get(_,y,g)},set(_,y,g,D){return Reflect.set(_,y,g,D)}});l[a]=h,F(Q,l,ut),F(Q,l[a],s)};function o(s,n){var a,l;const h=s.__legacy_source__,_=q(n)?n:fe((l=(a=h?.name)!==null&&a!==void 0?a:s?.name)!==null&&l!==void 0?l:"");r(s,_),h&&h!==s&&F(Q,R(Q,s),h)}return Z.isFunction(e)?o(e,i):e?(s,n)=>o(s,n):o}const _e=(e,i)=>{const{kind:r="class",name:o="",addInitializer:s=()=>{},metadata:n}=i?.ctx||{};return gt(i)(e,{kind:r,name:o,addInitializer:s,metadata:n}),N(e).instance};function ct(e){const i=Object.assign({enumerable:!1,writable:!0},e);return function(r,o){if(G(r,o)){Object.defineProperty(r,o,{configurable:!0,enumerable:i.enumerable,get(){},set(s){Object.defineProperty(this,o,Object.assign({value:s},i))}});return}if(q(o)){const s=o;return s.kind==="field"?function(n){return Object.defineProperty(this,s.name,Object.assign({value:n},i)),n}:(s.addInitializer(function(){const n=Object.getOwnPropertyDescriptor(this,s.name);n&&Object.defineProperty(this,s.name,Object.assign(Object.assign({},n),{enumerable:i.enumerable}))}),r)}}}function C(e,i){return G(e,i)||q(i)?ct()(e,i):ct(e)}function ye(e,i){const r=n=>class extends n{constructor(...a){super(...a),v.makeObservable(this)}},o=(n,a)=>{if(typeof Reflect?.getOwnMetadataKeys=="function")for(const l of Reflect.getOwnMetadataKeys(n)){const h=Reflect.getOwnMetadata(l,n);Reflect.defineMetadata(l,h,a)}};function s(n,a){if(!q(a)){const l=n,h=r(l);return Object.defineProperty(h,"__legacy_source__",{value:l,configurable:!0}),o(l,h),h}a.addInitializer(function(){v.makeObservable(this)})}return e&&!q(i)||e?s(e,i):s}const me=Symbol("field-key"),ve=Symbol("validation-key"),ge=Symbol("submit-key"),be=Symbol("exclude-key"),pe=Symbol("prop-from-view-key");class J{isPrototypeObject(i){const r=i?.constructor;return!!(r&&r.prototype===i)}getCacheTarget(i){return!i||typeof i!="object"?null:this.isPrototypeObject(i)?i:Object.getPrototypeOf(i)}computeFromPrototype(i){const r=[],o=new Map,s=new Set;let n=i;for(;n;){const l=Reflect.getOwnMetadata(this.metadataKey,n);if(Array.isArray(l))for(const h of l){const _=h?.name,y=String(_);s.has(y)||(s.add(y),r.push(h),o.set(y,h))}n=Object.getPrototypeOf(n)}return{ownRef:Reflect.getOwnMetadata(this.metadataKey,i),list:r,map:o}}constructor(i={}){this.metadataKey=null,this.cache=new WeakMap,this.name=i?.name,this.callback=i?.callback}isInstance(i={}){return i instanceof J||Object.getOwnPropertyNames(this).some(r=>Object.keys(i).includes(r))}fieldInstance(i,r){const o=r&&typeof r=="object"?Reflect.getOwnMetadata(this.metadataKey,r):void 0;if(Array.isArray(o))return o.find(l=>l.name===i);const s=this.getCacheTarget(r);if(!s)return;const n=Reflect.getOwnMetadata(this.metadataKey,s),a=this.cache.get(s);if(!a||a.ownRef!==n){const l=this.computeFromPrototype(s);return this.cache.set(s,l),l.map.get(String(i))}return a.map.get(String(i))}fields(i){const r=i&&typeof i=="object"?Reflect.getOwnMetadata(this.metadataKey,i):void 0;if(Array.isArray(r)){const l=[],h=new Set;let _=i;for(;_;){const y=Reflect.getOwnMetadata(this.metadataKey,_);if(Array.isArray(y))for(const g of y){const D=g?.name,b=String(D);h.has(b)||(h.add(b),l.push(g))}_=Object.getPrototypeOf(_)}return l}const o=this.getCacheTarget(i);if(!o)return[];const s=Reflect.getOwnMetadata(this.metadataKey,o),n=this.cache.get(o);if(n&&n.ownRef===s)return n.list;const a=this.computeFromPrototype(o);return this.cache.set(o,a),a.list}}class ht extends J{constructor(){super(...arguments),this.metadataKey=ve}}class ft extends J{constructor(){super(...arguments),this.metadataKey=ge}}class _t extends J{constructor(){super(...arguments),this.metadataKey=be}}class yt extends J{constructor(i={}){super(i),this.factory=null,this.mapping=null,this.collectChanges=!1,this.name=null,this.ctx=null,this.metadataKey=me,this.factory=i.factory,this.mapping=i.mapping,this.name=i.name,this.ctx=i.ctx,this.collectChanges=!!i.collectChanges}}class mt extends J{constructor(i={}){super(i),this.metadataKey=pe;for(const r in this)i&&r in i&&(this[r]=Reflect.get(i,r))}}function De(e){const i=(s,n)=>{const a=new mt({name:e,originName:String(n)});a.name=e,a.originName=String(n);const l=R(a.metadataKey,s,new Array);F(a.metadataKey,[...l,a],s)},r=s=>{s.addInitializer(function(){const n=new mt,a=n.fields(this);for(const l in this)a instanceof Array&&s.name===l&&(n.name=e,n.originName=l,n.value=this[l],a.push(n));F(n.metadataKey,a,this)})};function o(s,n){if(G(s,n)){i(s,n);return}if(q(n))return r(n),n.kind==="field"?a=>a:n}return e?((s,n)=>o(s,n)):(s=>s)}function Ie(e){const i=(s,n)=>{const a=new _t({callback:e,name:String(n)}),l=R(a.metadataKey,s,new Array);F(a.metadataKey,[...l,a],s)},r=s=>{s.addInitializer(function(){const n=new _t({callback:e,name:String(s.name)}),a=R(n.metadataKey,this,new Array);F(n.metadataKey,[...a,n],this)})};function o(s,n){if(G(s,n)){i(s,n);return}if(q(n))return r(n),n.kind==="field"?void 0:n}if(e)return((s,n)=>o(s,n))}const Oe=()=>{var e;return(e=globalThis.__REDUX_DEVTOOLS_EXTENSION__)!==null&&e!==void 0?e:null},Se=()=>{var e;return(e=globalThis.__MVVM_DEVTOOLS_APPLYING__)!==null&&e!==void 0?e:0},st=e=>{var i,r;const o=globalThis;o.__MVVM_DEVTOOLS_APPLYING__=((i=o.__MVVM_DEVTOOLS_APPLYING__)!==null&&i!==void 0?i:0)+1;try{return e()}finally{o.__MVVM_DEVTOOLS_APPLYING__=Math.max(0,((r=o.__MVVM_DEVTOOLS_APPLYING__)!==null&&r!==void 0?r:1)-1)}},we=()=>Se()>0,ee=e=>({data:e.service.dumpData,historyIndex:e.service.historyIndex}),ae=(e,i={})=>{const r=Oe();if(!r)return()=>{};const o=r.connect({name:i.name,instanceId:i.instanceId});let s=!1;try{o.init(ee(e))}catch{}const n=v.reaction(()=>ee(e),l=>{var h;if(!(s||we()))try{o.send({type:(h=i.actionType)!==null&&h!==void 0?h:"model:update"},l)}catch{}}),a=o.subscribe(l=>{var h;if(l.type!=="DISPATCH")return;const _=(h=l.payload)===null||h===void 0?void 0:h.type;if(_==="RESET"){s=!0,st(()=>{try{e.service.toInit()}finally{s=!1}});return}if(_==="COMMIT"){s=!0,st(()=>{try{e.service.commit()}finally{s=!1}});return}if(_==="ROLLBACK"){s=!0,st(()=>{try{e.service.toInit()}finally{s=!1}});return}if(_==="JUMP_TO_ACTION"||_==="JUMP_TO_STATE"){if(!l.state)return;try{const y=JSON.parse(l.state),g=y.historyIndex,D=e.service.history,b=Array.isArray(D)&&D.length>0,T=typeof g=="number"&&(g===-1&&b||g>=0&&b&&g<D.length);s=!0,st(()=>{var P;try{if(T){e.service.goToHistory(g);return}const z=(P=y.data)!==null&&P!==void 0?P:y;v.runInAction(()=>{e.service.loadData(z)})}finally{s=!1}})}catch{}}});return()=>{n(),typeof a=="function"&&a(),typeof o.unsubscribe=="function"&&o.unsubscribe(),typeof o.disconnect=="function"&&o.disconnect()}};W.enablePatches();const Me=new ft,Y=new yt,ke=new ht,Ae=new _t;let re=(()=>{var e,i,r,o,s,n,a,l,h,_;let y=[],g,D=[],b=[],T,P=[],z=[],L,B=[],x=[],M,d=[],O=[],A,j=[],E=[],V,K=[],U=[],$,X=[],tt=[],et,it=[],bt=[],pt,Dt=[],It=[],Ot,St=[],wt=[],Mt,kt=[],At=[],Tt,Et=[],zt=[],Pt,xt=[],jt=[],Ft,Vt=[],Ct=[],Rt,Lt,Kt,Ht,qt,Gt,Bt,Yt,Nt,Ut,$t,Wt;return e=class{get initData(){return c.__classPrivateFieldGet(this,i,"f")}set initData(t){c.__classPrivateFieldSet(this,i,t,"f")}get committedData(){return c.__classPrivateFieldGet(this,r,"f")}set committedData(t){c.__classPrivateFieldSet(this,r,t,"f")}get modified_(){return c.__classPrivateFieldGet(this,o,"f")}set modified_(t){c.__classPrivateFieldSet(this,o,t,"f")}get changes(){return c.__classPrivateFieldGet(this,s,"f")}set changes(t){c.__classPrivateFieldSet(this,s,t,"f")}get inverseChanges(){return c.__classPrivateFieldGet(this,n,"f")}set inverseChanges(t){c.__classPrivateFieldSet(this,n,t,"f")}get history(){return c.__classPrivateFieldGet(this,a,"f")}set history(t){c.__classPrivateFieldSet(this,a,t,"f")}get historyIndex(){return c.__classPrivateFieldGet(this,l,"f")}set historyIndex(t){c.__classPrivateFieldSet(this,l,t,"f")}constructor(t={},u){this[h]=(c.__runInitializers(this,y),c.__runInitializers(this,D,!0)),i.set(this,(c.__runInitializers(this,b),c.__runInitializers(this,P,null))),r.set(this,(c.__runInitializers(this,z),c.__runInitializers(this,B,{}))),o.set(this,(c.__runInitializers(this,x),c.__runInitializers(this,d,{}))),this.draft=(c.__runInitializers(this,O),c.__runInitializers(this,j,null)),s.set(this,(c.__runInitializers(this,E),c.__runInitializers(this,K,[]))),n.set(this,(c.__runInitializers(this,U),c.__runInitializers(this,X,[]))),a.set(this,(c.__runInitializers(this,tt),c.__runInitializers(this,it,[]))),l.set(this,(c.__runInitializers(this,bt),c.__runInitializers(this,Dt,-1))),this.initializedFields=(c.__runInitializers(this,It),c.__runInitializers(this,St,void 0)),this.legacyInitDone=(c.__runInitializers(this,wt),c.__runInitializers(this,kt,!1)),this.rawInitData=(c.__runInitializers(this,At),c.__runInitializers(this,Et,null)),this.options=(c.__runInitializers(this,zt),c.__runInitializers(this,xt,void 0)),this.historyMuted=(c.__runInitializers(this,jt),c.__runInitializers(this,Vt,!1)),this.serviceApi=(c.__runInitializers(this,Ct),{loadData:f=>this.loadData(f),reject:()=>this.reject(),commit:()=>this.commit(),commitField:f=>this.commitField(f),toInit:()=>this.toInit(),undo:()=>this.undo(),redo:()=>this.redo(),goToHistory:f=>this.goToHistory(f)}),this.options=u,this[W.immerable]=!0,this.init(t),this.autoAttachDevtools(),this.initLegacyFields()}initValidation(t){if(t)Reflect.get(this.validation,t);else for(const u in this.validation)this.validation[u]}init(t={}){this.cloneForInit(t),this.createDraft(t),this.defineData(this.initData)}initField(t,u){const f=Y.fieldInstance(t,this);if(f){t in this.initData||Reflect.set(this.initData,t,Reflect.get(this,t));const m=f?.factory?f.factory(this.initData,this):Reflect.get(this.initData,f.name);this.defineFieldValue(t,m,f),u?.skipValidation||this.initValidation(t),this.getInitializedFields().add(String(t))}}getInitializedFields(){return this.initializedFields||(this.initializedFields=new Set),this.initializedFields}initLegacyFields(){var t;if(this.legacyInitDone)return;const u=Y.fields(this);if(!u.some(p=>Object.prototype.hasOwnProperty.call(this,p.name)))return;this.legacyInitDone=!0;const f=this.getInitializedFields(),m=(t=this.rawInitData)!==null&&t!==void 0?t:this.initData;if(m&&m!==this.initData)try{this.initData=m}catch{this.initData=Object.assign({},m)}for(const p of u){const S=String(p.name);if(m&&S in m){const w=Y.fieldInstance(S,this);if(!w)continue;if(!f.has(S)){const k=m,H=w.factory?w.factory(k,this):Reflect.get(k,w.name);this.defineFieldValue(S,H,w),Reflect.set(this,S,H),f.add(S)}continue}f.has(S)||this.initField(S,{skipValidation:!0})}}createDraft(t){const u={};for(const f in t)Y.fieldInstance(f,this)&&Reflect.set(u,f,t[f]);this.draft=W.createDraft(u)}autoAttachDevtools(){var t,u,f,m,p,S,w,k,H,at,rt;const ot=globalThis;if(!ot.__MVVM_DEVTOOLS_AUTO__||((u=(t=this.options)===null||t===void 0?void 0:t.devtools)===null||u===void 0?void 0:u.enabled)===!1)return;const Qt=(w=(p=(m=(f=this.options)===null||f===void 0?void 0:f.devtools)===null||m===void 0?void 0:m.name)!==null&&p!==void 0?p:(S=this.constructor)===null||S===void 0?void 0:S.name)!==null&&w!==void 0?w:"Model",Jt=((k=ot.__MVVM_DEVTOOLS_SEQ__)!==null&&k!==void 0?k:0)+1;ot.__MVVM_DEVTOOLS_SEQ__=Jt,ae(this,{name:Qt,instanceId:(rt=(at=(H=this.options)===null||H===void 0?void 0:H.devtools)===null||at===void 0?void 0:at.instanceId)!==null&&rt!==void 0?rt:`${Qt}#${Jt}`})}withHistoryMuted(t){this.historyMuted=!0;try{t()}finally{this.historyMuted=!1}}syncChangesFromHistory(){const t=this.historyIndex>=0?this.history.slice(0,this.historyIndex+1):[];this.changes=t.flatMap(u=>u.patches),this.inverseChanges=t.flatMap(u=>u.inversePatches)}applyHistoryPatches(t){if(!t.length)return;W.applyPatches(this.draft,t);const u=new Set(t.map(f=>f.field).filter(Boolean));u.size!==0&&this.withHistoryMuted(()=>{var f;for(const m of u){const p=(f=Reflect.get(this.draft,m))!==null&&f!==void 0?f:Reflect.get(this.initData,m);Reflect.set(this,m,p),this.defineFieldValue(m,Reflect.get(this,m))}})}produceDraft(t,u,f){if(this.historyMuted)return;let m,p=[];t&&(m=t.split(".")[0],m&&!Y.fieldInstance(m,this).collectChanges)||(W.produce(this.draft,S=>{if(t){let w=S;const k=t.split(".");if(k.length>1)for(let H=0;H<k.length&&!(H!=k.length-1&&!Z.isObject(w));H++)Z.isObject(w)&&(w=w[k[H]]);else f=t;w&&(w[f]=u)}},(S,w)=>{m&&(S=S.map(k=>Object.assign(Object.assign({},k),{field:m})),w=w.map(k=>Object.assign(Object.assign({},k),{field:m}))),p=S,!(!S.length&&!w.length)&&(this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1),this.syncChangesFromHistory()),this.changes.push(...S),this.inverseChanges.push(...w),this.history.push({patches:S,inversePatches:w}),this.historyIndex=this.history.length-1)}),p.length&&W.applyPatches(this.draft,p))}createObservable(t,u,f,m=f){return t=v.isObservable(t)?t:v.observable.box(t),new Proxy(t,{get:(p,S,w)=>{const k=Reflect.get(p,S,w);return k&&typeof k=="object"&&!(k instanceof e)&&!v.isObservable(t)?this.createObservable(k,String(S),u,`${m}.${String(S)}`):k},set:(p,S,w,k)=>(t=w,this.produceDraft(m,t,String(S)),this.checkChange(f,Reflect.get(this,f)),Reflect.set(p,S,w,k))})}defineFieldValue(t,u,f){return!f&&(f=Y.fieldInstance(t,this)),u&&typeof u=="object"&&(u=this.createObservable(u,t,t)),u=v.observable.box(u),Reflect.defineProperty(this,f.name,{get:()=>u.get(),set:m=>{v.runInAction(()=>u.set(m)),this.produceDraft(f.name,u.get()),this.checkChange(f.name,u.get())},enumerable:!0,configurable:!0}),u}cloneForInit(t){if(t)try{this.initData=Object.assign({},t)}catch{}else this.rawInitData=null}checkChange(t,u){const f=Reflect.get(this.committedData,t)||Reflect.get(this.initData,t),m=t&&t in this.initData&&!Z.isEqual(f,u);return v.runInAction(()=>{m&&Reflect.set(this.modified_,t,f);for(const p in this.modified_)t===p&&t in this.modified_&&Z.isEqual(f,u)&&delete this.modified_[p]}),m}defineData(t){for(const u in this)Object.prototype.hasOwnProperty.call(this,u)&&Y.fieldInstance(u,this)&&(Reflect.set(this,u,Reflect.get(t,u)),this.initField(u))}get dirty(){return!Z.isEmpty(this.modified_)}commit(){for(const t of Y.fields(this))this.commitField(t.name);this.modified_={}}commitField(t){for(const u in this)u in this.modified_&&Reflect.set(this.committedData,u,this[u]);delete this.modified_[t],this.modified_=Object.assign({},this.modified_)}reject(){for(const t in this)t in this.modified_&&(this[t]=Reflect.get(this.modified_,t),this.commitField(t),this.defineFieldValue(t,this[t]));this.commit()}toInit(){return this.withHistoryMuted(()=>{for(const t in this)t in this.initData&&(this[t]=Reflect.get(this.initData,t),this.initField(t));this.init(this.initData)}),this}undo(){this.historyIndex<0||(this.applyHistoryPatches(this.history[this.historyIndex].inversePatches),this.historyIndex-=1,this.syncChangesFromHistory())}redo(){this.historyIndex>=this.history.length-1||(this.historyIndex=this.historyIndex+1,this.applyHistoryPatches(this.history[this.historyIndex].patches),this.syncChangesFromHistory())}goToHistory(t){if(!(t<-1||t>=this.history.length)&&t!==this.historyIndex){for(;this.historyIndex<t;)this.historyIndex=this.historyIndex+1,this.applyHistoryPatches(this.history[this.historyIndex].patches);for(;this.historyIndex>t;)this.applyHistoryPatches(this.history[this.historyIndex].inversePatches),this.historyIndex-=1;this.syncChangesFromHistory()}}loadData(t){return this.withHistoryMuted(()=>{this.init(t),this.defineData(this.initData)}),this}get dumpData(){this.initLegacyFields();const t=Object.create({}),u=m=>{try{return Me.fieldInstance(m,this).callback(Reflect.get(this,m),this)}catch{return Reflect.get(this,m)}},f=m=>{const p=Ae.fieldInstance(m,this);if(p)switch(typeof p.callback){case"boolean":return!!p.callback;case"function":return p.callback(Reflect.get(this,m),this)}return!1};Y.fields(this).forEach(m=>{var p;if(m.name in this)return!((p=this.options)===null||p===void 0)&&p.byFields&&!this.options.byFields.includes(m.name)||f(m.name)?void 0:Reflect.set(t,m.name,u(m.name))});try{return t}catch{return t&&Object.assign({},t)}}get validation(){this.initLegacyFields();const t={};for(const u in this){const f=ke.fieldInstance(u,this);f&&Reflect.set(t,u,f.callback(this[u],this)||"")}return t}get validAndDirty(){return this.dirty&&Object.values(this.validation).filter(Boolean).length===0}get service(){return Object.assign({dirty:this.dirty,dumpData:this.dumpData,validation:this.validation,changes:this.changes,inverseChanges:this.inverseChanges,history:this.history,historyIndex:this.historyIndex},this.serviceApi)}},i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,n=new WeakMap,a=new WeakMap,l=new WeakMap,g=[C],h=c.__propKey(W.immerable),(()=>{const I=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;T=[v.observable,C],L=[C],M=[C],A=[C],V=[C],$=[C],et=[C],pt=[C],Ot=[C],Mt=[C],Tt=[C],Pt=[C],Ft=[C],Rt=[v.action],Lt=[v.computed],Kt=[v.action],Ht=[v.action],qt=[v.action],Gt=[v.action],Bt=[v.action],Yt=[v.action],Nt=[v.action],Ut=[v.computed],$t=[v.computed],Wt=[(_=v.computed).struct.bind(_)],c.__esDecorate(e,null,T,{kind:"accessor",name:"initData",static:!1,private:!1,access:{has:t=>"initData"in t,get:t=>t.initData,set:(t,u)=>{t.initData=u}},metadata:I},P,z),c.__esDecorate(e,null,L,{kind:"accessor",name:"committedData",static:!1,private:!1,access:{has:t=>"committedData"in t,get:t=>t.committedData,set:(t,u)=>{t.committedData=u}},metadata:I},B,x),c.__esDecorate(e,null,M,{kind:"accessor",name:"modified_",static:!1,private:!1,access:{has:t=>"modified_"in t,get:t=>t.modified_,set:(t,u)=>{t.modified_=u}},metadata:I},d,O),c.__esDecorate(e,null,V,{kind:"accessor",name:"changes",static:!1,private:!1,access:{has:t=>"changes"in t,get:t=>t.changes,set:(t,u)=>{t.changes=u}},metadata:I},K,U),c.__esDecorate(e,null,$,{kind:"accessor",name:"inverseChanges",static:!1,private:!1,access:{has:t=>"inverseChanges"in t,get:t=>t.inverseChanges,set:(t,u)=>{t.inverseChanges=u}},metadata:I},X,tt),c.__esDecorate(e,null,et,{kind:"accessor",name:"history",static:!1,private:!1,access:{has:t=>"history"in t,get:t=>t.history,set:(t,u)=>{t.history=u}},metadata:I},it,bt),c.__esDecorate(e,null,pt,{kind:"accessor",name:"historyIndex",static:!1,private:!1,access:{has:t=>"historyIndex"in t,get:t=>t.historyIndex,set:(t,u)=>{t.historyIndex=u}},metadata:I},Dt,It),c.__esDecorate(e,null,Rt,{kind:"method",name:"produceDraft",static:!1,private:!1,access:{has:t=>"produceDraft"in t,get:t=>t.produceDraft},metadata:I},null,y),c.__esDecorate(e,null,Lt,{kind:"getter",name:"dirty",static:!1,private:!1,access:{has:t=>"dirty"in t,get:t=>t.dirty},metadata:I},null,y),c.__esDecorate(e,null,Kt,{kind:"method",name:"commit",static:!1,private:!1,access:{has:t=>"commit"in t,get:t=>t.commit},metadata:I},null,y),c.__esDecorate(e,null,Ht,{kind:"method",name:"commitField",static:!1,private:!1,access:{has:t=>"commitField"in t,get:t=>t.commitField},metadata:I},null,y),c.__esDecorate(e,null,qt,{kind:"method",name:"reject",static:!1,private:!1,access:{has:t=>"reject"in t,get:t=>t.reject},metadata:I},null,y),c.__esDecorate(e,null,Gt,{kind:"method",name:"toInit",static:!1,private:!1,access:{has:t=>"toInit"in t,get:t=>t.toInit},metadata:I},null,y),c.__esDecorate(e,null,Bt,{kind:"method",name:"undo",static:!1,private:!1,access:{has:t=>"undo"in t,get:t=>t.undo},metadata:I},null,y),c.__esDecorate(e,null,Yt,{kind:"method",name:"redo",static:!1,private:!1,access:{has:t=>"redo"in t,get:t=>t.redo},metadata:I},null,y),c.__esDecorate(e,null,Nt,{kind:"method",name:"goToHistory",static:!1,private:!1,access:{has:t=>"goToHistory"in t,get:t=>t.goToHistory},metadata:I},null,y),c.__esDecorate(e,null,Ut,{kind:"getter",name:"validation",static:!1,private:!1,access:{has:t=>"validation"in t,get:t=>t.validation},metadata:I},null,y),c.__esDecorate(e,null,$t,{kind:"getter",name:"validAndDirty",static:!1,private:!1,access:{has:t=>"validAndDirty"in t,get:t=>t.validAndDirty},metadata:I},null,y),c.__esDecorate(e,null,Wt,{kind:"getter",name:"service",static:!1,private:!1,access:{has:t=>"service"in t,get:t=>t.service},metadata:I},null,y),c.__esDecorate(null,null,g,{kind:"field",name:h,static:!1,private:!1,access:{has:t=>h in t,get:t=>t[h],set:(t,u)=>{t[h]=u}},metadata:I},D,b),c.__esDecorate(null,null,A,{kind:"field",name:"draft",static:!1,private:!1,access:{has:t=>"draft"in t,get:t=>t.draft,set:(t,u)=>{t.draft=u}},metadata:I},j,E),c.__esDecorate(null,null,Ot,{kind:"field",name:"initializedFields",static:!1,private:!1,access:{has:t=>"initializedFields"in t,get:t=>t.initializedFields,set:(t,u)=>{t.initializedFields=u}},metadata:I},St,wt),c.__esDecorate(null,null,Mt,{kind:"field",name:"legacyInitDone",static:!1,private:!1,access:{has:t=>"legacyInitDone"in t,get:t=>t.legacyInitDone,set:(t,u)=>{t.legacyInitDone=u}},metadata:I},kt,At),c.__esDecorate(null,null,Tt,{kind:"field",name:"rawInitData",static:!1,private:!1,access:{has:t=>"rawInitData"in t,get:t=>t.rawInitData,set:(t,u)=>{t.rawInitData=u}},metadata:I},Et,zt),c.__esDecorate(null,null,Pt,{kind:"field",name:"options",static:!1,private:!1,access:{has:t=>"options"in t,get:t=>t.options,set:(t,u)=>{t.options=u}},metadata:I},xt,jt),c.__esDecorate(null,null,Ft,{kind:"field",name:"historyMuted",static:!1,private:!1,access:{has:t=>"historyMuted"in t,get:t=>t.historyMuted,set:(t,u)=>{t.historyMuted=u}},metadata:I},Vt,Ct),I&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:I})})(),e})();const Te=()=>{var e;const i=globalThis;return!!((e=i.__MVVM_DEVTOOLS_HISTORY__)!==null&&e!==void 0?e:i.__MVVM_DEVTOOLS_AUTO__)},Ee=e=>Te()?!e||typeof e!="object"?{collectChanges:!0}:"collectChanges"in e?e:Object.assign(Object.assign({},e),{collectChanges:!0}):e;function ze(e,i){const r=Ee(G(e,i)?void 0:e),o=(a,l)=>{const h=new yt(Object.assign(Object.assign({},r),{name:String(l),ctx:null})),_=R(h.metadataKey,a,new Array);F(h.metadataKey,[..._,h],a),Object.getOwnPropertyDescriptor(a,l)||Object.defineProperty(a,l,{configurable:!0,enumerable:!0,get(){if(Object.prototype.hasOwnProperty.call(this,l))return Reflect.get(this,l);if(this.initData&&l in this.initData&&typeof this.initField=="function")return this.initField.call(this,String(l),{skipValidation:!0}),Reflect.get(this,l)},set(g){if(this.initData&&!(l in this.initData)&&Reflect.set(this.initData,l,g),typeof this.initField=="function"){this.initField.call(this,String(l),{skipValidation:!0});return}Object.defineProperty(this,l,{value:g,writable:!0,configurable:!0,enumerable:!0})}})},s=a=>{a.addInitializer(function(){if(this instanceof re&&typeof this.initField=="function"){const l=new yt(Object.assign(Object.assign({},r),{name:String(a.name),ctx:a})),h=R(l.metadataKey,this,new Array);F(l.metadataKey,[...h,l],this),this.initField.call(this,String(a.name))}})};function n(a,l){if(G(a,l)){o(a,l);return}if(q(l))return s(l),l.kind==="field"?h=>h:l}return G(e,i)?n(e,i):r&&!q(i)?(a,l)=>n(a,l):q(i)?n(void 0,i):(a,l)=>n(a,l)}function Pe(e){const i=(s,n)=>{const a=new ft({callback:e,name:String(n)}),l=R(a.metadataKey,s,new Array);F(a.metadataKey,[...l,a],s)},r=s=>{const n=new ft({callback:e,name:String(s.name)});s.addInitializer(function(){const a=R(n.metadataKey,this,new Array);F(n.metadataKey,[...a,n],this)})};function o(s,n){if(G(s,n)){i(s,n);return}if(q(n))return r(n),n.kind==="field"?a=>a:n}return e?((s,n)=>o(s,n)):(s=>s)}function xe(e){const i=(s,n)=>{const a=new ht({callback:e,name:String(n)}),l=R(a.metadataKey,s,new Array);F(a.metadataKey,[...l,a],s)},r=s=>{const n=new ht({callback:e,name:String(s.name)});s.addInitializer(function(){const a=R(n.metadataKey,this,new Array);F(n.metadataKey,[...a,n],this)})};function o(s,n){if(G(s,n)){i(s,n);return}if(q(n))return r(n),n.kind==="field"?a=>a:n}return e?((s,n)=>o(s,n)):(s=>s)}const oe=Symbol("store-key"),je=()=>{var e;return(e=globalThis.__REDUX_DEVTOOLS_EXTENSION__)!==null&&e!==void 0?e:null},Fe=()=>{var e;return(e=globalThis.__MVVM_DEVTOOLS_APPLYING__)!==null&&e!==void 0?e:0},Ve=e=>{var i,r;const o=globalThis;o.__MVVM_DEVTOOLS_APPLYING__=((i=o.__MVVM_DEVTOOLS_APPLYING__)!==null&&i!==void 0?i:0)+1;try{return e()}finally{o.__MVVM_DEVTOOLS_APPLYING__=Math.max(0,((r=o.__MVVM_DEVTOOLS_APPLYING__)!==null&&r!==void 0?r:1)-1)}},Ce=()=>Fe()>0,vt=e=>({items:e.items.map(i=>{var r,o;return{name:(o=(r=i.constructor)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"Model",data:i.service.dumpData,historyIndex:i.service.historyIndex}})}),Re=e=>!!(e&&typeof e=="object"&&Array.isArray(e.items)),Le=e=>{if(!e)return null;try{const i=JSON.parse(e);return Re(i)?i:null}catch{return null}},le=(e,i={})=>{var r,o;const s=je();if(!s)return()=>{};const n=s.connect({name:i.name,instanceId:i.instanceId});let a=!1,l=(o=(r=e.items[0])===null||r===void 0?void 0:r.constructor)!==null&&o!==void 0?o:null;try{n.init(vt(e))}catch{}const h=v.reaction(()=>vt(e),g=>{var D;if(a||Ce())return;const b=(D=e.items[0])===null||D===void 0?void 0:D.constructor;b&&(l=b);try{n.send({type:"store:update"},g)}catch{}}),_=g=>(a=!0,Ve(()=>{try{return g()}finally{a=!1}})),y=n.subscribe(g=>{var D;if(g.type!=="DISPATCH")return;const b=(D=g.payload)===null||D===void 0?void 0:D.type;if(b==="RESET"||b==="ROLLBACK"){_(()=>e.reset());return}if(b==="JUMP_TO_ACTION"||b==="JUMP_TO_STATE"){const T=Le(g.state);if(!T)return;_(()=>{var P,z,L;if(T.items.length===e.items.length&&e.items.every(O=>{var A,j;return typeof((A=O?.service)===null||A===void 0?void 0:A.goToHistory)=="function"||typeof((j=O?.service)===null||j===void 0?void 0:j.loadData)=="function"})){v.runInAction(()=>{T.items.forEach((O,A)=>{var j;const E=(j=e.items[A])===null||j===void 0?void 0:j.service,V=O.historyIndex,K=E?.history;if(Array.isArray(K)&&K.length>0&&typeof V=="number"&&typeof E?.goToHistory=="function"&&(V===-1&&K.length>0||V<K.length)){E.goToHistory(V);return}typeof E?.loadData=="function"&&E.loadData(O.data)})});return}const x=(z=(P=e.items[0])===null||P===void 0?void 0:P.constructor)!==null&&z!==void 0?z:l,M=T.items.map(O=>O.data);if(x){e.applyLoaded(M,{model:x,cash:!1}),l=x;return}e.applyLoaded(M,{cash:!1});const d=(L=e.items[0])===null||L===void 0?void 0:L.constructor;d&&(l=d)})}});return()=>{h(),typeof y=="function"&&y(),typeof n.unsubscribe=="function"&&n.unsubscribe(),typeof n.disconnect=="function"&&n.disconnect()}};let Ke=(()=>{var e,i,r;let o=[],s,n=[],a=[],l,h=[],_=[],y,g,D,b,T,P,z,L,B,x;return e=class{get items(){return c.__classPrivateFieldGet(this,i,"f")}set items(d){c.__classPrivateFieldSet(this,i,d,"f")}get _cash(){return c.__classPrivateFieldGet(this,r,"f")}set _cash(d){c.__classPrivateFieldSet(this,r,d,"f")}constructor(){i.set(this,(c.__runInitializers(this,o),c.__runInitializers(this,n,[]))),r.set(this,(c.__runInitializers(this,a),c.__runInitializers(this,h,[]))),c.__runInitializers(this,_),v.makeObservable(this),this.autoAttachDevtools()}add(d){this.items.push(d)}addMany(d){d?.length&&(this.items=this.items.concat(d))}remove(d){this.items=this.items.filter(O=>O!==d)}find(d){return this.items.find(d)}filter(d){return this.items.filter(d)}findBy(d,O){return this.items.find(A=>A?.[d]===O)}clear(){this.items=[]}get size(){return this.items.length}get snapshot(){return vt(this)}get cash(){return this._cash}reset(){this.clear()}applyLoaded(d,O={}){const{model:A,mode:j="replace",cash:E=!0}=O;if(E&&this.setCash(d),j==="append"){const V=A?d.map(K=>new A(K)):d;this.addMany(V);return}this.items=A?d.map(V=>new A(V)):d}setCash(d){this._cash=d??[]}autoAttachDevtools(){var d,O,A,j,E,V,K,U;const $=globalThis;if(!$.__MVVM_DEVTOOLS_AUTO__)return;const X=R(oe,this.constructor,{})||{};if(((d=X.devtools)===null||d===void 0?void 0:d.enabled)===!1)return;const tt=(E=(A=(O=X.devtools)===null||O===void 0?void 0:O.name)!==null&&A!==void 0?A:(j=this.constructor)===null||j===void 0?void 0:j.name)!==null&&E!==void 0?E:"Store",et=((V=$.__MVVM_DEVTOOLS_STORE_SEQ__)!==null&&V!==void 0?V:0)+1;$.__MVVM_DEVTOOLS_STORE_SEQ__=et;const it=(U=(K=X.devtools)===null||K===void 0?void 0:K.instanceId)!==null&&U!==void 0?U:`${tt}#${et}`;le(this,{name:tt,instanceId:it})}},i=new WeakMap,r=new WeakMap,(()=>{const M=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[v.observable],l=[v.observable],y=[v.action],g=[v.action],D=[v.action],b=[v.action],T=[v.computed],P=[v.computed],z=[v.computed],L=[v.action],B=[v.action],x=[v.action],c.__esDecorate(e,null,s,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:d=>"items"in d,get:d=>d.items,set:(d,O)=>{d.items=O}},metadata:M},n,a),c.__esDecorate(e,null,l,{kind:"accessor",name:"_cash",static:!1,private:!1,access:{has:d=>"_cash"in d,get:d=>d._cash,set:(d,O)=>{d._cash=O}},metadata:M},h,_),c.__esDecorate(e,null,y,{kind:"method",name:"add",static:!1,private:!1,access:{has:d=>"add"in d,get:d=>d.add},metadata:M},null,o),c.__esDecorate(e,null,g,{kind:"method",name:"addMany",static:!1,private:!1,access:{has:d=>"addMany"in d,get:d=>d.addMany},metadata:M},null,o),c.__esDecorate(e,null,D,{kind:"method",name:"remove",static:!1,private:!1,access:{has:d=>"remove"in d,get:d=>d.remove},metadata:M},null,o),c.__esDecorate(e,null,b,{kind:"method",name:"clear",static:!1,private:!1,access:{has:d=>"clear"in d,get:d=>d.clear},metadata:M},null,o),c.__esDecorate(e,null,T,{kind:"getter",name:"size",static:!1,private:!1,access:{has:d=>"size"in d,get:d=>d.size},metadata:M},null,o),c.__esDecorate(e,null,P,{kind:"getter",name:"snapshot",static:!1,private:!1,access:{has:d=>"snapshot"in d,get:d=>d.snapshot},metadata:M},null,o),c.__esDecorate(e,null,z,{kind:"getter",name:"cash",static:!1,private:!1,access:{has:d=>"cash"in d,get:d=>d.cash},metadata:M},null,o),c.__esDecorate(e,null,L,{kind:"method",name:"reset",static:!1,private:!1,access:{has:d=>"reset"in d,get:d=>d.reset},metadata:M},null,o),c.__esDecorate(e,null,B,{kind:"method",name:"applyLoaded",static:!1,private:!1,access:{has:d=>"applyLoaded"in d,get:d=>d.applyLoaded},metadata:M},null,o),c.__esDecorate(e,null,x,{kind:"method",name:"setCash",static:!1,private:!1,access:{has:d=>"setCash"in d,get:d=>d.setCash},metadata:M},null,o),M&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:M})})(),e})();function He(e){return N(e,"instance")}function qe(e){return((i,r)=>ne(e)(i,r))}function Ge(e,i){const r=(o,s)=>{var n;const a=typeof e=="string"?{id:e}:typeof e=="object"?e:{id:(n=s?.name)!==null&&n!==void 0?n:o?.name};F(oe,a,o),gt(a)(o,s)};return typeof e=="function"?r(e,i):(o,s)=>r(o,s)}class Be{}const dt=new mt;function Ye(e,i){return de.observer((r={})=>{const{resolved:o,instance:s}=Xt.useMemo(()=>{const a=N(e)||(typeof e!="string"?{instance:new e}:void 0),l=a?.instance;return{resolved:a,instance:l}},[e]);if(Xt.useEffect(()=>{if(s)return typeof s.onInit=="function"&&s.onInit(),()=>{typeof s.onDispose=="function"&&s.onDispose()}},[s]),o){const n=dt.fields(s),a=n.length>0?n:dt.fields(Object.getPrototypeOf(s));for(const l in r)if(a instanceof Array){const h=a.find(_=>_.name===l);h&&Reflect.set(s,h.originName,Reflect.get(r,l))}return F(dt.metadataKey,a,s),i(Object.assign({viewModel:s},r))}return i(Object.assign({},r))})}const ie={load:"load",failure:"failure",ready:"ready",canceled:"canceled",disposed:"disposed"},Ne={load:"load",failure:"failure",ready:"ready",canceled:"canceled",disposed:"disposed"},nt=()=>{};class Ue{constructor(i,r){var o,s,n,a,l,h,_;this.isExecuting=!1,this.activeCount=0,this.isCanceled=!1,this.isDisposed=!1,this.error=null,this.controllers=new Set,this.queue=[],this.runningPromise=null,this.queueTail=Promise.resolve(),this.cancelToken=0,this.fn=i,this.opt=Object.assign({concurrency:(o=r?.concurrency)!==null&&o!==void 0?o:"ignore",trackError:(s=r?.trackError)!==null&&s!==void 0?s:!0,resetErrorOnExecute:(n=r?.resetErrorOnExecute)!==null&&n!==void 0?n:!0,swallowError:(a=r?.swallowError)!==null&&a!==void 0?a:!0,abortable:(l=r?.abortable)!==null&&l!==void 0?l:!1},r),this.states=Object.assign(Object.assign({},ie),(h=r?.states)!==null&&h!==void 0?h:{}),this.stateKeys=Object.assign(Object.assign({},Ne),(_=r?.stateKeys)!==null&&_!==void 0?_:{}),v.makeAutoObservable(this,{fn:!1,opt:!1,states:!1,stateKeys:!1,resolveState:!1,getScope:!1,controllers:!1,queue:!1,runningPromise:!1,queueTail:!1,cancelToken:!1},{autoBind:!0})}get canExecute(){return this.isDisposed||!(this.opt.canExecute?this.opt.canExecute(this.getScope()):!0)?!1:this.opt.concurrency==="ignore"?!this.isExecuting:!0}resolveState(i){var r,o;const s=(r=this.stateKeys[i])!==null&&r!==void 0?r:i;return(o=this.states[s])!==null&&o!==void 0?o:ie[i]}getScope(){return{state:this.state,states:this.states,isExecuting:this.isExecuting,activeCount:this.activeCount,isCanceled:this.isCanceled,isDisposed:this.isDisposed,error:this.error}}get state(){return this.isDisposed?this.resolveState("disposed"):this.isExecuting?this.resolveState("load"):this.error?this.resolveState("failure"):this.isCanceled?this.resolveState("canceled"):this.resolveState("ready")}resetError(){this.error=null}cancel(){var i,r;this.cancelToken+=1,this.isCanceled=!0,(r=(i=this.opt).onCancel)===null||r===void 0||r.call(i),this.opt.cancelQueued&&this.clearQueue();for(const o of this.controllers)o.abort()}dispose(){this.isDisposed||(this.isDisposed=!0,this.clearQueue(),this.cancel())}clearQueue(){if(this.queue.length===0)return;const i=this.queue.splice(0,this.queue.length);for(const r of i)r.canceled=!0,r.settled||(r.settled=!0,r.resolve(void 0))}execute(...i){var r;if(this.isDisposed)return Promise.resolve(void 0);if(!this.canExecute)return(r=this.runningPromise)!==null&&r!==void 0?r:Promise.resolve(void 0);const o=n=>{this.runningPromise=n;const a=()=>{this.runningPromise===n&&(this.runningPromise=null)};return n.then(a,a),n},s=()=>c.__awaiter(this,void 0,void 0,function*(){var n,a,l,h,_,y,g,D;if(this.isDisposed)return;const b=this.opt.abortable?new AbortController:null;b&&this.controllers.add(b),v.runInAction(()=>{this.activeCount+=1,this.isExecuting=this.activeCount>0,this.isCanceled=!1,this.opt.trackError&&this.opt.resetErrorOnExecute&&(this.error=null)});const T=this.cancelToken;let P=!1,z=!1,L=null,B=null;try{(a=(n=this.opt).onStart)===null||a===void 0||a.call(n,...i);const x=this.opt.abortable?b.signal:void 0;B=this.fn(...i,x);const M=yield B;return z=this.cancelToken!==T,z?void 0:((h=(l=this.opt).onSuccess)===null||h===void 0||h.call(l,M,...i),P=!0,M)}catch(x){if(this.opt.abortable&&b?.signal.aborted){v.runInAction(()=>{this.isCanceled=!0}),z=!0,L=null;return}if(L=x,z=this.cancelToken!==T,this.opt.trackError&&v.runInAction(()=>{this.error=x}),(y=(_=this.opt).onError)===null||y===void 0||y.call(_,x),!this.opt.swallowError)throw x;return}finally{v.runInAction(()=>{this.activeCount=Math.max(0,this.activeCount-1),this.isExecuting=this.activeCount>0}),b&&this.controllers.delete(b),!z&&this.cancelToken!==T&&(z=!0),(D=(g=this.opt).onFinally)===null||D===void 0||D.call(g,{ok:P,canceled:z,error:L},...i)}});switch(this.opt.concurrency){case"parallel":return o(s());case"restart":return this.cancel(),o(s());case"queue":{const n=this.opt.queueLimit;if(typeof n=="number"&&n>0&&this.queue.length>=n)return Promise.resolve(void 0);const a={promise:Promise.resolve(void 0),resolve:nt,reject:nt,canceled:!1,settled:!1},l=this.activeCount===0&&this.queue.length===0;a.promise=new Promise((y,g)=>{a.resolve=y,a.reject=g}),this.queue.push(a);const h=()=>c.__awaiter(this,void 0,void 0,function*(){if(a.settled)return;if(a.canceled||this.isDisposed){a.settled=!0,a.resolve(void 0);return}const y=this.queue.indexOf(a);y>=0&&this.queue.splice(y,1);try{const g=yield s();a.settled||(a.settled=!0,a.resolve(g))}catch(g){a.settled||(a.settled=!0,a.reject(g))}}),_=l?h():this.queueTail.then(h,h);return this.queueTail=_.then(nt,nt),o(a.promise)}default:return this.isExecuting&&this.runningPromise?this.runningPromise:o(s())}}}function ce(e,i){return new Ue(e,i)}function $e(e,i){const r=v.flow(e),o=new Set,s=i?.onCancel;return ce((...a)=>{const l=r(...a);o.add(l);const h=()=>{o.delete(l)};return l.then(h,h),new Promise((_,y)=>{l.then(_,g=>{if(v.isFlowCancellationError(g)){_(void 0);return}y(g)})})},Object.assign(Object.assign({},i),{onCancel:()=>{var a;for(const l of o)(a=l.cancel)===null||a===void 0||a.call(l);s?.()}}))}function We(e){return function(...i){return v.runInAction(()=>e.apply(this,i))}}exports.GetService=N;exports.GetStore=He;exports.Inject=ne;exports.InjectStore=qe;exports.MakeObservable=ye;exports.Model=re;exports.PropFromView=De;exports.Service=gt;exports.SetService=_e;exports.Store=Ge;exports.StoreBase=Ke;exports.TODO=he;exports.ViewModel=Be;exports.asyncCommand=ce;exports.attachModelDevtools=ae;exports.attachStoreDevtools=le;exports.commandAction=We;exports.defineMetadata=F;exports.define_prop=C;exports.exclude=Ie;exports.field=ze;exports.flowCommand=$e;exports.getExecutingFunctionNameByStack=se;exports.getOwnMetadata=R;exports.isSerializable=ue;exports.submit=Pe;exports.validation=xe;exports.view=Ye;
//# sourceMappingURL=index.cjs.map
