{"version":3,"file":"mvvm-di.cjs","sources":["../../src/vite-plugins/mvvm-di.ts"],"sourcesContent":[null],"names":["SERVICE_DECORATOR","STORE_DECORATOR","MVVM_MODULE","mvvmServiceDiPlugin","config","srcRoot","diPath","scanAndUpdateAll","files","collectSourceFiles","file","processFile","ensureDiFile","exists","containers","collectContainerFiles","content","fs","imports","serviceInterfaces","storeInterfaces","containerPath","servicesName","inferInterfaceName","storesName","inferStoresInterfaceName","importPath","toImportPath","path","filePath","entries","extractEntries","entry","ensureEntryInContainer","kind","ts","source","resolveContext","buildResolveContext","serviceIdentifiers","storeIdentifiers","statement","importClause","element","imported","_b","_a","local","results","node","className","decorators","_c","decorator","expr","decoratorName","isService","isStore","firstArg","key","resolvedKey","resolveServiceIdFromDecoratorArg","arg","context","idProp","prop","resolveStringFromExpression","resolveState","localConsts","collectLocalConstInitializers","importedConsts","collectImportedConstRefs","locals","declaration","moduleName","namedBindings","resolvedPath","resolveImportSource","importName","localName","fromFilePath","basePath","candidates","candidate","value","span","resolved","left","right","resolveStringFromIdentifier","name","localInit","importRef","resolveImportedStringConstant","ref","cacheKey","resolveExportedStringConstant","exportName","readSourceFile","collectExportedNameMap","initializer","exported","mod","inferScriptKind","target","findContainerTarget","containerExisted","entryKey","formatServiceKey","interfaceName","diInterfaceName","ensureDiIncludesContainer","existing","updated","updateContainerContent","absolute","currentDir","segments","containerDir","importStatement","escapeRegExp","insertImport","interfaceBlock","findInterfaceBlock","block","entryLineRe","lines","cleanedLines","hasEntry","changed","line","match","keyText","typeName","entryLine","insertIndex","newBody","initialContent","insertDiImport","normalizeDiDeclaration","ensureDiInterfaceDeclaration","ensureDiExtends","i","startMatch","startIndex","endIndex","body","indentMatch","indent","re","moduleMatch","moduleStart","moduleEnd","findMatchingBrace","insertion","depth","char","extendsList","start","end","nameSegment","toPascalCase","part","fromDir","withoutExt","dir","fullPath","ctx"],"mappings":"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"}