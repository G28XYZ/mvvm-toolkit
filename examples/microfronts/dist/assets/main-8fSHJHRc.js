const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./microfronts_mf_2_host__loadRemote__mf5ka_mf_1_microfront__loadRemote__-CZ3GXaqV.js","./_commonjsHelpers-Cn9vc4LF.js","./microfronts_mf_2_host__mf_v__runtimeInit__mf_v__-BdYEaO_e.js","./microfronts_mf_2_host__loadRemote__mfauchan_mf_1_microfront__loadRemote__-C2N2lfzm.js"])))=>i.map(i=>d[i]);
var N=Object.defineProperty;var a=(e,t)=>N(e,"name",{value:t,configurable:!0});import{m as L}from"./microfronts_mf_2_host__mf_v__runtimeInit__mf_v__-BdYEaO_e.js";import{m as d,R as g}from"./microfronts_mf_2_host__loadShare__react__loadShare__-BCrmuU7B.js";import{m as M}from"./microfronts_mf_2_host__loadShare__react_mf_2_dom__loadShare__-BGgdugfG.js";import{m}from"./microfronts_mf_2_host__loadShare__mobx__loadShare__-VQ_zVZWV.js";import{_ as h}from"./preload-helper-Cc2_yIPf.js";import"./_commonjsHelpers-Cn9vc4LF.js";var E={exports:{}},_={};var O=d,P=Symbol.for("react.element"),q=Symbol.for("react.fragment"),A=Object.prototype.hasOwnProperty,C=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,o){var i,n={},s=null,p=null;o!==void 0&&(s=""+o),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)A.call(t,i)&&!I.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:P,type:e,key:s,ref:p,props:n,_owner:C.current}}a(R,"q");_.Fragment=q;_.jsx=R;_.jsxs=R;E.exports=_;var r=E.exports,v={},b=M;v.createRoot=b.createRoot,v.hydrateRoot=b.hydrateRoot;const{initPromise:D}=L,V=D.then(e=>e.loadShare("rvm-toolkit",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"^1.0.6"}}})),T=await V.then(e=>e());var f=T,U=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,l=a((e,t,o,i)=>{for(var n=i>1?void 0:i?Q(t,o):t,s=e.length-1,p;s>=0;s--)(p=e[s])&&(n=(i?p(t,o,n):p(n))||n);return i&&n&&U(t,o,n),n},"__decorateClass"),u;let c=(u=class extends f.ViewModel{constructor(){super(...arguments),this.query="",this.queryListeners=new Set,this.submitListeners=new Set,this.getQuery=()=>this.query,this.setQuery=t=>{if(t!==this.query){this.query=t;for(const o of this.queryListeners)o(this.query)}},this.submit=()=>{for(const t of this.submitListeners)t()},this.onQuery=t=>(this.queryListeners.add(t),()=>{this.queryListeners.delete(t)}),this.onSubmit=t=>(this.submitListeners.add(t),()=>{this.submitListeners.delete(t)})}},a(u,"AppVM"),u);l([m.observable],c.prototype,"query",2);l([m.observable],c.prototype,"queryListeners",2);l([m.observable],c.prototype,"submitListeners",2);l([m.action],c.prototype,"setQuery",2);l([m.action],c.prototype,"submit",2);l([m.action],c.prototype,"onQuery",2);l([m.action],c.prototype,"onSubmit",2);c=l([f.Service({id:"mfHost:AppVM"}),f.MakeObservable],c);const k={"5ka-microfront":{key:"5ka-microfront",remote:"mf5ka",remoteUrl:"https://g28xyz.github.io/rvm-toolkit/examples/microfronts/5ka/remoteEntry.js",devUrl:"http://localhost:5175/remoteEntry.js",defaultRemoteEntryPath:"microfront/5ka-microfront/remoteEntry.js",importers:{packages:a(()=>h(()=>import("./microfronts_mf_2_host__loadRemote__mf5ka_mf_1_microfront__loadRemote__-CZ3GXaqV.js").then(e=>e.m),__vite__mapDeps([0,1,2]),import.meta.url),"packages"),federation:a(()=>h(()=>import("./microfronts_mf_2_host__loadRemote__mf5ka_mf_1_microfront__loadRemote__-CZ3GXaqV.js").then(e=>e.m),__vite__mapDeps([0,1,2]),import.meta.url),"federation")}},"auchan-microfront":{key:"auchan-microfront",remote:"mfauchan",remoteUrl:"https://g28xyz.github.io/rvm-toolkit/examples/microfronts/auchan/remoteEntry.js",devUrl:"http://localhost:5174/remoteEntry.js",defaultRemoteEntryPath:"microfront/auchan-microfront/remoteEntry.js",importers:{packages:a(()=>h(()=>import("./microfronts_mf_2_host__loadRemote__mfauchan_mf_1_microfront__loadRemote__-C2N2lfzm.js").then(e=>e.m),__vite__mapDeps([3,1,2]),import.meta.url),"packages"),federation:a(()=>h(()=>import("./microfronts_mf_2_host__loadRemote__mfauchan_mf_1_microfront__loadRemote__-C2N2lfzm.js").then(e=>e.m),__vite__mapDeps([3,1,2]),import.meta.url),"federation")}}},$=a(e=>String(e).trim().toLowerCase()==="federation"?"federation":"packages","resolveMode"),S=$("federation");function F(e){let t="pending",o,i;const n=e().then(s=>{t="success",o=s},s=>{t="error",i=s});return{read(){if(t==="pending")throw n;if(t==="error")throw i;return o}}}a(F,"createResource");const y="./",K=a(e=>(y.endsWith("/")?y:`${y}/`)+e.replace(/^\//,""),"withBase");async function z(){const e=await fetch(K("microfront.json"),{cache:"no-store"});if(!e.ok)throw new Error(`Manifest request failed (${e.status})`);const t=await e.json();if(!Array.isArray(t))throw new Error("Manifest must be an array.");return t.map(o=>typeof o=="string"?o.trim():null).filter(o=>!!(o&&o in k))}a(z,"loadManifestKeys");async function B(e){const t=k[e],o=await t.importers[S](),i=o?.default??o?.Microfront??o?.App;if(!i)throw new Error(`"${e}" must export default React component.`);const n=o?.microfrontMeta??{};return{key:e,origin:S==="federation"?t.remote:e,title:n.title??e,description:n.description,Component:i}}a(B,"loadOne");const H=F(async()=>{const e=Array.from(new Set(await z()));return(await Promise.all(e.map(B))).sort((o,i)=>o.title.localeCompare(i.title))}),j=class j extends g.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}render(){return this.state.error?this.props.fallback(this.state.error):this.props.children}};a(j,"ErrorBoundary");let x=j;const W=f.view("mfHost:AppVM",({viewModel:e})=>{const t=H.read(),[o,i]=d.useState(()=>t[0]?.key??""),n=d.useMemo(()=>t.find(s=>s.key===o)??null,[t,o]);return r.jsxs("div",{className:"app",children:[r.jsxs("header",{className:"header",children:[r.jsx("h1",{children:"Microfront services"}),r.jsx("p",{children:"Shared search across product providers."})]}),r.jsxs("form",{className:"search",onSubmit:a(s=>{s.preventDefault(),e.submit()},"onSubmit"),children:[r.jsx("input",{type:"search",value:e.query,onChange:a(s=>e.setQuery(s.target.value),"onChange"),placeholder:"Search products","aria-label":"Search products"}),r.jsx("button",{type:"submit",children:"Search"})]}),r.jsxs("div",{className:"layout",children:[r.jsxs("aside",{className:"services",children:[r.jsx("div",{className:"section-title",children:"Providers"}),r.jsx("div",{className:"service-list",children:t.map(s=>r.jsxs("button",{type:"button",className:"service-item","data-active":s.key===o,onClick:a(()=>i(s.key),"onClick"),children:[r.jsx("span",{className:"service-title",children:s.title}),r.jsx("span",{className:"service-meta",children:s.origin}),s.description?r.jsx("span",{className:"service-desc",children:s.description}):null]},s.key))})]}),r.jsxs("section",{className:"preview",children:[r.jsx("div",{className:"section-title",children:n?n.title:"Select a provider"}),n?r.jsx(d.Suspense,{fallback:r.jsx("div",{className:"empty-panel",children:"Loading microfront…"}),children:r.jsx(n.Component,{})}):r.jsx("div",{className:"empty-panel",children:"No microfronts found."})]})]})]})});function J(){return r.jsx(x,{fallback:a(e=>r.jsx("div",{className:"app",children:r.jsxs("div",{className:"empty-panel",children:["Failed to load microfronts: ",e instanceof Error?e.message:String(e)]})}),"fallback"),children:r.jsx(d.Suspense,{fallback:r.jsx("div",{className:"empty-panel",children:"Loading providers…"}),children:r.jsx(W,{})})})}a(J,"MicrofrontsApp");const w=document.getElementById("root");w&&v.createRoot(w).render(r.jsx(g.StrictMode,{children:r.jsx(J,{})}));
//# sourceMappingURL=main-8fSHJHRc.js.map
