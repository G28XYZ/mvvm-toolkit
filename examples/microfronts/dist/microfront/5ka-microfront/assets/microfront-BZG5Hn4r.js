var lr=Object.defineProperty;var s=(e,t)=>lr(e,"name",{value:t,configurable:!0});import{m as ur}from"./mf5ka__mf_v__runtimeInit__mf_v__-RyIHmAgr.js";import{m as u,R as w,t as ft}from"./mf5ka__loadShare__react__loadShare__-BA0rPJcW.js";import"./Reflect-DY8XkH4i.js";import{m as D}from"./mf5ka__loadShare__mobx__loadShare__-Ci_CZI5b.js";import"./_commonjsHelpers-Cn9vc4LF.js";var xt={exports:{}},Le={};var cr=u,dr=Symbol.for("react.element"),fr=Symbol.for("react.fragment"),pr=Object.prototype.hasOwnProperty,mr=cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vr={key:!0,ref:!0,__self:!0,__source:!0};function Tt(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)pr.call(t,n)&&!vr.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:dr,type:e,key:i,ref:a,props:o,_owner:mr.current}}s(Tt,"q");Le.Fragment=fr;Le.jsx=Tt;Le.jsxs=Tt;xt.exports=Le;var d=xt.exports;const{initPromise:_r}=ur,hr=_r.then(e=>e.loadShare("rvm-toolkit",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"^1.0.6"}}})),br=await hr.then(e=>e());var _=br,gr=Object.defineProperty,x=s((e,t,r,n)=>{for(var o=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=a(t,r,o)||o);return o&&gr(t,r,o),o},"__decorateClass$6");const at=class at extends _.Model{constructor(){super(...arguments),this.plu=0,this.name=""}};s(at,"ProductModel");let S=at;x([_.field.noObserve],S.prototype,"plu");x([_.field],S.prototype,"name");x([_.field],S.prototype,"image_links");x([_.field],S.prototype,"uom");x([_.field],S.prototype,"step");x([_.field],S.prototype,"rating");x([_.field],S.prototype,"promo");x([_.field],S.prototype,"prices");x([_.field],S.prototype,"labels");x([_.field],S.prototype,"property_clarification");x([_.field],S.prototype,"has_age_restriction");x([_.field],S.prototype,"stock_limit");x([_.field],S.prototype,"product_advert");x([_.field],S.prototype,"is_large_card");x([_.field],S.prototype,"boost_type");x([_.field],S.prototype,"badges");x([_.field],S.prototype,"initial_weight_step");x([_.field],S.prototype,"min_weight");x([_.field],S.prototype,"orange_loyalty_points");x([_.field],S.prototype,"is_available");x([_.field],S.prototype,"price_piece_unit");const ne="5ka";var yr=Object.getOwnPropertyDescriptor,$r=s((e,t,r,n)=>{for(var o=n>1?void 0:n?yr(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=a(o)||o);return o},"__decorateClass$5"),X;let pt=(X=class{constructor(){this.BASE_URL="https://5d.5ka.ru/api/catalog/v3"}async search(t){const{query:r,storeId:n="35XY",mode:o="delivery",includeRestrict:i=!0,limit:a=100,offset:c,signal:l}=t,f=new URL(`${this.BASE_URL}/stores/${n}/search`),p=new URLSearchParams({mode:o,include_restrict:i?"true":"false",q:r,limit:String(a)});typeof c=="number"&&p.set("offset",String(c)),f.search=p.toString();const m=await fetch(f,{method:"GET",headers:{Accept:"application/json"},signal:l});if(!m.ok){const y=await m.text().catch(()=>"");throw new Error(`HTTP ${m.status}: ${y||m.statusText}`)}return await m.json()}async simpleSearch(t){const r=new AbortController,n=setTimeout(()=>r.abort(),15e3);try{return await this.search({query:t,storeId:"35XY",mode:"delivery",includeRestrict:!0,limit:12,signal:r.signal})}finally{clearTimeout(n)}}},s(X,"Api"),X);pt=$r([_.Service({id:`${ne}:Api`})],pt);var Er=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,It=s((e,t,r,n)=>{for(var o=n>1?void 0:n?wr(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&Er(t,r,o),o},"__decorateClass$4"),J;let Ue=(J=class extends _.StoreBase(S){async search(t){const r=await this.api.simpleSearch(t);r?.products&&this.applyLoaded(r.products)}},s(J,"ProductStore"),J);It([_.Inject("5ka:Api")],Ue.prototype,"api",2);Ue=It([_.Store({id:`${ne}:ProductStore`})],Ue);var Sr=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,je=s((e,t,r,n)=>{for(var o=n>1?void 0:n?xr(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&Sr(t,r,o),o},"__decorateClass$3"),Z;let de=(Z=class extends _.ViewModel{constructor(){super(...arguments),this.query=""}setQuery(t){this.query=t}},s(Z,"ProductVM"),Z);je([_.InjectStore("5ka:ProductStore")],de.prototype,"store",2);je([D.observable],de.prototype,"query",2);je([D.action.bound],de.prototype,"setQuery",1);de=je([_.Service({id:`${ne}:ProductVM`}),_.MakeObservable],de);var Tr=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,oe=s((e,t,r,n)=>{for(var o=n>1?void 0:n?Ir(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&Tr(t,r,o),o},"__decorateClass$2"),z;let U=(z=class extends _.ViewModel{constructor(){super(...arguments),this.lastQuery="",this.correction=""}get items(){return this.store.items||[]}get resultCount(){return this.items.length}},s(z,"ProductListVM"),z);oe([_.InjectStore("5ka:ProductStore")],U.prototype,"store",2);oe([D.observable],U.prototype,"lastQuery",2);oe([D.observable],U.prototype,"correction",2);oe([D.computed],U.prototype,"items",1);oe([D.computed],U.prototype,"resultCount",1);U=oe([_.Service({id:`${ne}:ProductListVM`}),_.MakeObservable],U);var Pr=Object.defineProperty,Lr=Object.getOwnPropertyDescriptor,H=s((e,t,r,n)=>{for(var o=n>1?void 0:n?Lr(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&Pr(t,r,o),o},"__decorateClass$1");const mt=s(()=>{if(typeof window>"u")return null;const e=window.__microfrontSearch;return!e||typeof e.onQuery!="function"||typeof e.onSubmit!="function"?null:e},"getExternalSearchBridge");var ee;let A=(ee=class extends _.ViewModel{constructor(){super(...arguments),this.hasExternalSearch=!!mt(),this.externalDisposers=[],this.search=_.flowCommand(()=>this._search(),{canExecute:s(({state:t,states:r})=>this.parent.query.trim().length>0&&t===r.ready,"canExecute")})}async*_search(){await this.store.search(this.parent.query)}updateQuery(t){this.parent.setQuery(t)}setHasExternalSearch(t){this.hasExternalSearch=t}clear(){this.parent.setQuery("")}onInit(){const t=mt();t&&(this.setHasExternalSearch(!0),this.parent.setQuery(t.getQuery()),this.externalDisposers.push(t.onQuery(r=>{this.parent.setQuery(r)})),this.externalDisposers.push(t.onSubmit(()=>{this.search.execute()})))}onDispose(){for(const t of this.externalDisposers)t();this.externalDisposers=[],this.setHasExternalSearch(!1)}},s(ee,"SearchVM"),ee);H([_.InjectStore("5ka:ProductStore")],A.prototype,"store",2);H([_.Inject("5ka:ProductVM")],A.prototype,"parent",2);H([_.Inject("5ka:Api")],A.prototype,"api",2);H([D.observable],A.prototype,"hasExternalSearch",2);H([D.action.bound],A.prototype,"updateQuery",1);H([D.action.bound],A.prototype,"setHasExternalSearch",1);H([D.action.bound],A.prototype,"clear",1);A=H([_.Service({id:`${ne}:SearchVM`}),_.MakeObservable],A);var jr=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,Fe=s((e,t,r,n)=>{for(var o=n>1?void 0:n?Fr(t,r):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&jr(t,r,o),o},"__decorateClass"),te;let fe=(te=class extends _.ViewModel{constructor(){super(...arguments),this.isAdded=!1}},s(te,"ProductItemVM"),te);Fe([_.InjectStore("5ka:ProductStore")],fe.prototype,"store",2);Fe([_.PropFromView("item")],fe.prototype,"item",2);Fe([D.observable],fe.prototype,"isAdded",2);fe=Fe([_.Service({id:`${ne}:ProductItemVM`,transient:!0}),_.MakeObservable],fe);const Cr=typeof document<"u"?w.useLayoutEffect:()=>{},B=s(e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},"$431fbd86ca7dc216$export$b204af158042fbac"),W=s(e=>e&&"window"in e&&e.window===e?e:B(e).defaultView||window,"$431fbd86ca7dc216$export$f21a1ffae260145a");function Or(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}s(Or,"$431fbd86ca7dc216$var$isNode");function Dr(e){return Or(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}s(Dr,"$431fbd86ca7dc216$export$af51f0f06c0f328a");let Nr=!1;function Ze(){return Nr}s(Ze,"$f4e2df6bd15f8569$export$98658e8c59125e6a");function Pt(e,t){if(!Ze())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let r=t;for(;r!==null;){if(r===e)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:Dr(r)?r=r.host:r=r.parentNode}return!1}s(Pt,"$d4ee10de306f2510$export$4282f70798064fe0");const Ke=s((e=document)=>{var t;if(!Ze())return e.activeElement;let r=e.activeElement;for(;r&&"shadowRoot"in r&&(!((t=r.shadowRoot)===null||t===void 0)&&t.activeElement);)r=r.shadowRoot.activeElement;return r},"$d4ee10de306f2510$export$cd4e5573fbe2b576");function Lt(e){return Ze()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}s(Lt,"$d4ee10de306f2510$export$e58f029f0fbfdb29");function kr(e){if(Ar())e.focus({preventScroll:!0});else{let t=Mr(e);e.focus(),Rr(t)}}s(kr,"$7215afc6de606d6b$export$de79e2c695e052f3");let we=null;function Ar(){if(we==null){we=!1;try{document.createElement("div").focus({get preventScroll(){return we=!0,!0}})}catch{}}return we}s(Ar,"$7215afc6de606d6b$var$supportsPreventScroll");function Mr(e){let t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}s(Mr,"$7215afc6de606d6b$var$getScrollableElements");function Rr(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n}s(Rr,"$7215afc6de606d6b$var$restoreScrollPosition");function Ce(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let r=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(r)&&r.some(n=>e.test(n.brand))||e.test(window.navigator.userAgent)}s(Ce,"$c87311424ea30a05$var$testUserAgent");function jt(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}s(jt,"$c87311424ea30a05$var$testPlatform");function se(e){let t=null;return()=>(t==null&&(t=e()),t)}s(se,"$c87311424ea30a05$var$cached");const Te=se(function(){return jt(/^Mac/i)}),Hr=se(function(){return jt(/^iPad/i)||Te()&&navigator.maxTouchPoints>1}),Br=se(function(){return Ce(/AppleWebKit/i)&&!Vr()}),Vr=se(function(){return Ce(/Chrome/i)}),Wr=se(function(){return Ce(/Android/i)}),Ur=se(function(){return Ce(/Firefox/i)});function pe(e,t,r=!0){var n,o;let{metaKey:i,ctrlKey:a,altKey:c,shiftKey:l}=t;Ur()&&(!((o=window.event)===null||o===void 0||(n=o.type)===null||n===void 0)&&n.startsWith("key"))&&e.target==="_blank"&&(Te()?i=!0:a=!0);let f=Br()&&Te()&&!Hr()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:i,ctrlKey:a,altKey:c,shiftKey:l}):new MouseEvent("click",{metaKey:i,ctrlKey:a,altKey:c,shiftKey:l,detail:1,bubbles:!0,cancelable:!0});pe.isOpening=r,kr(e),e.dispatchEvent(f),pe.isOpening=!1}s(pe,"$ea8dcbcb9ea1b556$export$95185d699e05d4d7");pe.isOpening=!1;function Ft(){let e=u.useRef(new Map),t=u.useCallback((o,i,a,c)=>{let l=c?.once?(...f)=>{e.current.delete(a),a(...f)}:a;e.current.set(a,{type:i,eventTarget:o,fn:l,options:c}),o.addEventListener(i,l,c)},[]),r=u.useCallback((o,i,a,c)=>{var l;let f=((l=e.current.get(a))===null||l===void 0?void 0:l.fn)||a;o.removeEventListener(i,f,c),e.current.delete(a)},[]),n=u.useCallback(()=>{e.current.forEach((o,i)=>{r(o.eventTarget,o.type,i,o.options)})},[r]);return u.useEffect(()=>n,[n]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:n}}s(Ft,"$03deb23ff14920c4$export$4eaf04e54aa8eed6");function Kr(e){return e.pointerType===""&&e.isTrusted?!0:Wr()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}s(Kr,"$6a7db85432448f7f$export$60278871457622de");function Ct(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}s(Ct,"$8a9cb279dc87e130$export$525bc4921d56d4a");function Gr(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}s(Gr,"$8a9cb279dc87e130$export$c2b7abe5d61ec696");function Ot(e){let t=u.useRef({isFocused:!1,observer:null});return Cr(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),u.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let n=r.target,o=s(i=>{if(t.current.isFocused=!1,n.disabled){let a=Ct(i);e?.(a)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},"onBlurHandler");n.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&n.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let a=n===document.activeElement?null:document.activeElement;n.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[e])}s(Ot,"$8a9cb279dc87e130$export$715c682d09d639cc");let qr=!1,me=null,Ge=new Set,ue=new Map,K=!1,qe=!1;const Qr={Tab:!0,Escape:!0};function ze(e,t){for(let r of Ge)r(e,t)}s(ze,"$507fabe10e71c6fb$var$triggerChangeHandlers");function Yr(e){return!(e.metaKey||!Te()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}s(Yr,"$507fabe10e71c6fb$var$isValidKey");function Ie(e){K=!0,!pe.isOpening&&Yr(e)&&(me="keyboard",ze("keyboard",e))}s(Ie,"$507fabe10e71c6fb$var$handleKeyboardEvent");function Q(e){me="pointer","pointerType"in e&&e.pointerType,(e.type==="mousedown"||e.type==="pointerdown")&&(K=!0,ze("pointer",e))}s(Q,"$507fabe10e71c6fb$var$handlePointerEvent");function Dt(e){!pe.isOpening&&Kr(e)&&(K=!0,me="virtual")}s(Dt,"$507fabe10e71c6fb$var$handleClickEvent");function Nt(e){e.target===window||e.target===document||qr||!e.isTrusted||(!K&&!qe&&(me="virtual",ze("virtual",e)),K=!1,qe=!1)}s(Nt,"$507fabe10e71c6fb$var$handleFocusEvent");function kt(){K=!1,qe=!0}s(kt,"$507fabe10e71c6fb$var$handleWindowBlur");function Qe(e){if(typeof window>"u"||typeof document>"u"||ue.get(W(e)))return;const t=W(e),r=B(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){K=!0,n.apply(this,arguments)},r.addEventListener("keydown",Ie,!0),r.addEventListener("keyup",Ie,!0),r.addEventListener("click",Dt,!0),t.addEventListener("focus",Nt,!0),t.addEventListener("blur",kt,!1),typeof PointerEvent<"u"&&(r.addEventListener("pointerdown",Q,!0),r.addEventListener("pointermove",Q,!0),r.addEventListener("pointerup",Q,!0)),t.addEventListener("beforeunload",()=>{At(e)},{once:!0}),ue.set(t,{focus:n})}s(Qe,"$507fabe10e71c6fb$var$setupGlobalFocusEvents");const At=s((e,t)=>{const r=W(e),n=B(e);t&&n.removeEventListener("DOMContentLoaded",t),ue.has(r)&&(r.HTMLElement.prototype.focus=ue.get(r).focus,n.removeEventListener("keydown",Ie,!0),n.removeEventListener("keyup",Ie,!0),n.removeEventListener("click",Dt,!0),r.removeEventListener("focus",Nt,!0),r.removeEventListener("blur",kt,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",Q,!0),n.removeEventListener("pointermove",Q,!0),n.removeEventListener("pointerup",Q,!0)),ue.delete(r))},"$507fabe10e71c6fb$var$tearDownWindowFocusTracking");function Xr(e){const t=B(e);let r;return t.readyState!=="loading"?Qe(e):(r=s(()=>{Qe(e)},"loadListener"),t.addEventListener("DOMContentLoaded",r)),()=>At(e,r)}s(Xr,"$507fabe10e71c6fb$export$2f1888112f558a7d");typeof document<"u"&&Xr();function Mt(){return me!=="pointer"}s(Mt,"$507fabe10e71c6fb$export$b9b3dfddab17db27");const Jr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Zr(e,t,r){let n=B(r?.target);const o=typeof window<"u"?W(r?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?W(r?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?W(r?.target).HTMLElement:HTMLElement,c=typeof window<"u"?W(r?.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof o&&!Jr.has(n.activeElement.type)||n.activeElement instanceof i||n.activeElement instanceof a&&n.activeElement.isContentEditable,!(e&&t==="keyboard"&&r instanceof c&&!Qr[r.key])}s(Zr,"$507fabe10e71c6fb$var$isKeyboardFocusEvent");function zr(e,t,r){Qe(),u.useEffect(()=>{let n=s((o,i)=>{Zr(!!r?.isTextInput,o,i)&&e(Mt())},"handler");return Ge.add(n),()=>{Ge.delete(n)}},t)}s(zr,"$507fabe10e71c6fb$export$ec71b4b83ac08ec3");function en(e){let{isDisabled:t,onFocus:r,onBlur:n,onFocusChange:o}=e;const i=u.useCallback(l=>{if(l.target===l.currentTarget)return n&&n(l),o&&o(!1),!0},[n,o]),a=Ot(i),c=u.useCallback(l=>{const f=B(l.target),p=f?Ke(f):Ke();l.target===l.currentTarget&&p===Lt(l.nativeEvent)&&(r&&r(l),o&&o(!0),a(l))},[o,r,a]);return{focusProps:{onFocus:!t&&(r||o||n)?c:void 0,onBlur:!t&&(n||o)?i:void 0}}}s(en,"$a1ea59d68270f0dd$export$f8168d8dd8fd66e6");function tn(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:o}=e,i=u.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:c}=Ft(),l=u.useCallback(m=>{m.currentTarget.contains(m.target)&&i.current.isFocusWithin&&!m.currentTarget.contains(m.relatedTarget)&&(i.current.isFocusWithin=!1,c(),r&&r(m),o&&o(!1))},[r,o,i,c]),f=Ot(l),p=u.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const y=B(m.target),h=Ke(y);if(!i.current.isFocusWithin&&h===Lt(m.nativeEvent)){n&&n(m),o&&o(!0),i.current.isFocusWithin=!0,f(m);let b=m.currentTarget;a(y,"focus",v=>{if(i.current.isFocusWithin&&!Pt(b,v.target)){let g=new y.defaultView.FocusEvent("blur",{relatedTarget:v.target});Gr(g,b);let E=Ct(g);l(E)}},{capture:!0})}},[n,o,f,a,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:l}}}s(tn,"$9ab94262bd0047c7$export$420e68273165f4ec");let Ye=!1,Se=0;function rn(){Ye=!0,setTimeout(()=>{Ye=!1},50)}s(rn,"$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents");function vt(e){e.pointerType==="touch"&&rn()}s(vt,"$6179b936705e76d3$var$handleGlobalPointerEvent");function nn(){if(!(typeof document>"u"))return Se===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",vt),Se++,()=>{Se--,!(Se>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",vt)}}s(nn,"$6179b936705e76d3$var$setupGlobalTouchEvents");function on(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:o}=e,[i,a]=u.useState(!1),c=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(nn,[]);let{addGlobalListener:l,removeAllGlobalListeners:f}=Ft(),{hoverProps:p,triggerHoverEnd:m}=u.useMemo(()=>{let y=s((v,g)=>{if(c.pointerType=g,o||g==="touch"||c.isHovered||!v.currentTarget.contains(v.target))return;c.isHovered=!0;let E=v.currentTarget;c.target=E,l(B(v.target),"pointerover",F=>{c.isHovered&&c.target&&!Pt(c.target,F.target)&&h(F,F.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:E,pointerType:g}),r&&r(!0),a(!0)},"triggerHoverStart"),h=s((v,g)=>{let E=c.target;c.pointerType="",c.target=null,!(g==="touch"||!c.isHovered||!E)&&(c.isHovered=!1,f(),n&&n({type:"hoverend",target:E,pointerType:g}),r&&r(!1),a(!1))},"triggerHoverEnd2"),b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=v=>{Ye&&v.pointerType==="mouse"||y(v,v.pointerType)},b.onPointerLeave=v=>{!o&&v.currentTarget.contains(v.target)&&h(v,v.pointerType)}),{hoverProps:b,triggerHoverEnd:h}},[t,r,n,o,c,l,f]);return u.useEffect(()=>{o&&m({currentTarget:c.target},c.pointerType)},[o]),{hoverProps:p,isHovered:i}}s(on,"$6179b936705e76d3$export$ae780daf29e6d456");function sn(e={}){let{autoFocus:t=!1,isTextInput:r,within:n}=e,o=u.useRef({isFocused:!1,isFocusVisible:t||Mt()}),[i,a]=u.useState(!1),[c,l]=u.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=u.useCallback(()=>l(o.current.isFocused&&o.current.isFocusVisible),[]),p=u.useCallback(h=>{o.current.isFocused=h,a(h),f()},[f]);zr(h=>{o.current.isFocusVisible=h,f()},[],{isTextInput:r});let{focusProps:m}=en({isDisabled:n,onFocusChange:p}),{focusWithinProps:y}=tn({isDisabled:!n,onFocusWithinChange:p});return{isFocused:i,isFocusVisible:c,focusProps:n?y:m}}s(sn,"$f7dceffc5ad7768b$export$4e328f61c538687f");var an=Object.defineProperty,ln=s((e,t,r)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,"d"),Ve=s((e,t,r)=>(ln(e,typeof t!="symbol"?t+"":t,r),r),"r$1"),re;let un=(re=class{constructor(){Ve(this,"current",this.detect()),Ve(this,"handoffState","pending"),Ve(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s(re,"o"),re),ce=new un;function Rt(e){var t;return ce.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}s(Rt,"l$1");function cn(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}s(cn,"t$3");function Oe(){let e=[],t={addEventListener(r,n,o,i){return r.addEventListener(n,o,i),t.add(()=>r.removeEventListener(n,o,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return cn(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,o){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:o}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=Oe();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let o of e.splice(n,1))o()}},dispose(){for(let r of e.splice(0))r()}};return t}s(Oe,"o$3");function et(){let[e]=u.useState(Oe);return u.useEffect(()=>()=>e.dispose(),[e]),e}s(et,"p");let R=s((e,t)=>{ce.isServer?u.useEffect(e,t):u.useLayoutEffect(e,t)},"n$3");function Ht(e){let t=u.useRef(e);return R(()=>{t.current=e},[e]),t}s(Ht,"s$3");let I=s(function(e){let t=Ht(e);return w.useCallback((...r)=>t.current(...r),[t])},"o$2");function dn(e){let t=e.width/2,r=e.height/2;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}s(dn,"E$1");function fn(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}s(fn,"P$1");function pn({disabled:e=!1}={}){let t=u.useRef(null),[r,n]=u.useState(!1),o=et(),i=I(()=>{t.current=null,n(!1),o.dispose()}),a=I(c=>{if(o.dispose(),t.current===null){t.current=c.currentTarget,n(!0);{let l=Rt(c.currentTarget);o.addEventListener(l,"pointerup",i,!1),o.addEventListener(l,"pointermove",f=>{if(t.current){let p=dn(f);n(fn(p,t.current.getBoundingClientRect()))}},!1),o.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:r,pressProps:e?{}:{onPointerDown:a,onPointerUp:i,onClick:i}}}s(pn,"w$1");function tt(e){return u.useMemo(()=>e,Object.values(e))}s(tt,"n$2");function Xe(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}s(Xe,"t$2");function G(e,t,...r){if(e in t){let o=t[e];return typeof o=="function"?o(...r):o}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,G),n}s(G,"u$2");var Pe=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Pe||{}),M=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(M||{});function ve(){let e=vn();return u.useCallback(t=>mn({mergeRefs:e,...t}),[e])}s(ve,"K");function mn({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:o,visible:i=!0,name:a,mergeRefs:c}){c=c??_n;let l=Bt(t,e);if(i)return xe(l,r,n,a,c);let f=o??0;if(f&2){let{static:p=!1,...m}=l;if(p)return xe(m,r,n,a,c)}if(f&1){let{unmount:p=!0,...m}=l;return G(p?0:1,{0(){return null},1(){return xe({...m,hidden:!0,style:{display:"none"}},r,n,a,c)}})}return xe(l,r,n,a,c)}s(mn,"U");function xe(e,t={},r,n,o){let{as:i=r,children:a,refName:c="ref",...l}=We(e,["unmount","static"]),f=e.ref!==void 0?{[c]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let m={};if(t){let y=!1,h=[];for(let[b,v]of Object.entries(t))typeof v=="boolean"&&(y=!0),v===!0&&h.push(b.replace(/([A-Z])/g,g=>`-${g.toLowerCase()}`));if(y){m["data-headlessui-state"]=h.join(" ");for(let b of h)m[`data-${b}`]=""}}if(Y(i)&&(Object.keys(V(l)).length>0||Object.keys(V(m)).length>0))if(!u.isValidElement(p)||Array.isArray(p)&&p.length>1||bn(p)){if(Object.keys(V(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(V(l)).concat(Object.keys(V(m))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=p.props,h=y?.className,b=typeof h=="function"?(...E)=>Xe(h(...E),l.className):Xe(h,l.className),v=b?{className:b}:{},g=Bt(p.props,V(We(l,["ref"])));for(let E in m)E in g&&delete m[E];return u.cloneElement(p,Object.assign({},g,m,f,{ref:o(hn(p),f.ref)},v))}return u.createElement(i,Object.assign({},We(l,["ref"]),!Y(i)&&f,!Y(i)&&m),p)}s(xe,"F$1");function vn(){let e=u.useRef([]),t=u.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}s(vn,"$");function _n(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}s(_n,"I");function Bt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let o in n)o.startsWith("on")&&typeof n[o]=="function"?(r[o]!=null||(r[o]=[]),r[o].push(n[o])):t[o]=n[o];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[o=>{var i;return(i=o?.preventDefault)==null?void 0:i.call(o)}]);for(let n in r)Object.assign(t,{[n](o,...i){let a=r[n];for(let c of a){if((o instanceof Event||o?.nativeEvent instanceof Event)&&o.defaultPrevented)return;c(o,...i)}}});return t}s(Bt,"P");function _t(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let o in n)o.startsWith("on")&&typeof n[o]=="function"?(r[o]!=null||(r[o]=[]),r[o].push(n[o])):t[o]=n[o];for(let n in r)Object.assign(t,{[n](...o){let i=r[n];for(let a of i)a?.(...o)}});return t}s(_t,"V$2");function ie(e){var t;return Object.assign(u.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}s(ie,"Y");function V(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}s(V,"m");function We(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}s(We,"h");function hn(e){return w.version.split(".")[0]>="19"?e.props.ref:e.ref}s(hn,"H$1");function Y(e){return e===u.Fragment||e===Symbol.for("react.fragment")}s(Y,"b");function bn(e){return Y(e.type)}s(bn,"D$1");function gn(e){return typeof e!="object"||e===null?!1:"nodeType"in e}s(gn,"o$1");function Vt(e){return gn(e)&&"tagName"in e}s(Vt,"t$1");function Wt(e){return Vt(e)&&"accessKey"in e}s(Wt,"n$1");function ht(e){return Vt(e)&&"tabIndex"in e}s(ht,"i$1");function yn(e){return Wt(e)&&e.nodeName==="FIELDSET"}s(yn,"a$1");function Ut(e){return Wt(e)&&e.nodeName==="LEGEND"}s(Ut,"E");function $n(e){let t=e.parentElement,r=null;for(;t&&!yn(t);)Ut(t)&&(r=t),t=t.parentElement;let n=t?.getAttribute("disabled")==="";return n&&En(r)?!1:n}s($n,"s$2");function En(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Ut(t))return!1;t=t.previousElementSibling}return!0}s(En,"r");let Kt=Symbol();function wn(e,t=!0){return Object.assign(e,{[Kt]:t})}s(wn,"T$1");function _e(...e){let t=u.useRef(e);u.useEffect(()=>{t.current=e},[e]);let r=I(n=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(n):o.current=n)});return e.every(n=>n==null||n?.[Kt])?void 0:r}s(_e,"y");var q=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(q||{});let Sn=u.createContext(()=>{});function xn({value:e,children:t}){return w.createElement(Sn.Provider,{value:e},t)}s(xn,"C$1");function Tn(e,t){return u.useMemo(()=>{var r;if(e.type)return e.type;let n=(r=e.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}s(Tn,"e");function In(e=0){let[t,r]=u.useState(e),n=u.useCallback(l=>r(l),[]),o=u.useCallback(l=>r(f=>f|l),[]),i=u.useCallback(l=>(t&l)===l,[t]),a=u.useCallback(l=>r(f=>f&~l),[]),c=u.useCallback(l=>r(f=>f^l),[]);return{flags:t,setFlag:n,addFlag:o,hasFlag:i,removeFlag:a,toggleFlag:c}}s(In,"c$1");var Pn={},bt,gt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((bt=process==null?void 0:Pn)==null?void 0:bt.NODE_ENV)==="test"&&typeof((gt=Element?.prototype)==null?void 0:gt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Ln=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Ln||{});function Gt(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}s(Gt,"x");function qt(e,t,r,n){let[o,i]=u.useState(r),{hasFlag:a,addFlag:c,removeFlag:l}=In(e&&o?3:0),f=u.useRef(!1),p=u.useRef(!1),m=et();return R(()=>{var y;if(e){if(r&&i(!0),!t){r&&c(3);return}return(y=n?.start)==null||y.call(n,r),jn(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(r?(c(3),l(4)):(c(4),l(2)))},run(){p.current?r?(l(3),c(4)):(l(4),c(3)):r?l(1):c(1)},done(){var h;p.current&&On(t)||(f.current=!1,l(7),r||i(!1),(h=n?.end)==null||h.call(n,r))}})}},[e,r,t,m]),e?[o,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}s(qt,"N");function jn(e,{prepare:t,run:r,done:n,inFlight:o}){let i=Oe();return Cn(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(Fn(e,n))})}),i.dispose}s(jn,"C");function Fn(e,t){var r,n;let o=Oe();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let a=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(c=>c instanceof CSSTransition))!=null?n:[];return a.length===0?(t(),o.dispose):(Promise.allSettled(a.map(c=>c.finished)).then(()=>{i||t()}),o.dispose)}s(Fn,"M$2");function Cn(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}s(Cn,"j");function On(e){var t,r;return((r=(t=e.getAnimations)==null?void 0:t.call(e))!=null?r:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}s(On,"D");let De=u.createContext(null);De.displayName="OpenClosedContext";var O=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(O||{});function rt(){return u.useContext(De)}s(rt,"u");function Qt({value:e,children:t}){return w.createElement(De.Provider,{value:e},t)}s(Qt,"c");function Dn({children:e}){return w.createElement(De.Provider,{value:null},e)}s(Dn,"s$1");function Nn(){let e=typeof document>"u";return"useSyncExternalStore"in ft?(t=>t.useSyncExternalStore)(ft)(()=>()=>{},()=>!1,()=>!e):!1}s(Nn,"s");function Yt(){let e=Nn(),[t,r]=u.useState(ce.isHandoffComplete);return t&&ce.isHandoffComplete===!1&&r(!1),u.useEffect(()=>{t!==!0&&r(!0)},[t]),u.useEffect(()=>ce.handoff(),[]),e?!1:t}s(Yt,"l");function kn(){let e=u.useRef(!1);return R(()=>(e.current=!0,()=>{e.current=!1}),[]),e}s(kn,"f");function Xt(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Y((t=e.as)!=null?t:Zt)||w.Children.count(e.children)===1}s(Xt,"ue");let Ne=u.createContext(null);Ne.displayName="TransitionContext";var An=(e=>(e.Visible="visible",e.Hidden="hidden",e))(An||{});function Mn(){let e=u.useContext(Ne);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}s(Mn,"He");function Rn(){let e=u.useContext(ke);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}s(Rn,"Ae$1");let ke=u.createContext(null);ke.displayName="NestingContext";function Ae(e){return"children"in e?Ae(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}s(Ae,"M$1");function Jt(e,t){let r=Ht(e),n=u.useRef([]),o=kn(),i=et(),a=I((h,b=M.Hidden)=>{let v=n.current.findIndex(({el:g})=>g===h);v!==-1&&(G(b,{[M.Unmount](){n.current.splice(v,1)},[M.Hidden](){n.current[v].state="hidden"}}),i.microTask(()=>{var g;!Ae(n)&&o.current&&((g=r.current)==null||g.call(r))}))}),c=I(h=>{let b=n.current.find(({el:v})=>v===h);return b?b.state!=="visible"&&(b.state="visible"):n.current.push({el:h,state:"visible"}),()=>a(h,M.Unmount)}),l=u.useRef([]),f=u.useRef(Promise.resolve()),p=u.useRef({enter:[],leave:[]}),m=I((h,b,v)=>{l.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([g])=>g!==h)),t?.chains.current[b].push([h,new Promise(g=>{l.current.push(g)})]),t?.chains.current[b].push([h,new Promise(g=>{Promise.all(p.current[b].map(([E,F])=>F)).then(()=>g())})]),b==="enter"?f.current=f.current.then(()=>t?.wait.current).then(()=>v(b)):v(b)}),y=I((h,b,v)=>{Promise.all(p.current[b].splice(0).map(([g,E])=>E)).then(()=>{var g;(g=l.current.shift())==null||g()}).then(()=>v(b))});return u.useMemo(()=>({children:n,register:c,unregister:a,onStart:m,onStop:y,wait:f,chains:p}),[c,a,n,m,y,p,f])}s(Jt,"Te");let Zt=u.Fragment,zt=Pe.RenderStrategy;function Hn(e,t){var r,n;let{transition:o=!0,beforeEnter:i,afterEnter:a,beforeLeave:c,afterLeave:l,enter:f,enterFrom:p,enterTo:m,entered:y,leave:h,leaveFrom:b,leaveTo:v,...g}=e,[E,F]=u.useState(null),T=u.useRef(null),N=Xt(e),k=_e(...N?[T,t,F]:t===null?[]:[t]),he=(r=g.unmount)==null||r?M.Unmount:M.Hidden,{show:j,appear:be,initial:P}=Mn(),[L,Me]=u.useState(j?"visible":"hidden"),lt=Rn(),{register:ge,unregister:ye}=lt;R(()=>ge(T),[ge,T]),R(()=>{if(he===M.Hidden&&T.current){if(j&&L!=="visible"){Me("visible");return}return G(L,{hidden:s(()=>ye(T),"hidden"),visible:s(()=>ge(T),"visible")})}},[L,T,ge,ye,j,he]);let Re=Yt();R(()=>{if(N&&Re&&L==="visible"&&T.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,L,Re,N]);let or=P&&!be,ut=be&&j&&P,He=u.useRef(!1),$e=Jt(()=>{He.current||(Me("hidden"),ye(T))},lt),ct=I(Be=>{He.current=!0;let Ee=Be?"enter":"leave";$e.onStart(T,Ee,le=>{le==="enter"?i?.():le==="leave"&&c?.()})}),dt=I(Be=>{let Ee=Be?"enter":"leave";He.current=!1,$e.onStop(T,Ee,le=>{le==="enter"?a?.():le==="leave"&&l?.()}),Ee==="leave"&&!Ae($e)&&(Me("hidden"),ye(T))});u.useEffect(()=>{N&&o||(ct(j),dt(j))},[j,N,o]);let sr=!(!o||!N||!Re||or),[,C]=qt(sr,E,j,{start:ct,end:dt}),ir=V({ref:k,className:((n=Xe(g.className,ut&&f,ut&&p,C.enter&&f,C.enter&&C.closed&&p,C.enter&&!C.closed&&m,C.leave&&h,C.leave&&!C.closed&&b,C.leave&&C.closed&&v,!C.transition&&j&&y))==null?void 0:n.trim())||void 0,...Gt(C)}),ae=0;L==="visible"&&(ae|=O.Open),L==="hidden"&&(ae|=O.Closed),j&&L==="hidden"&&(ae|=O.Opening),!j&&L==="visible"&&(ae|=O.Closing);let ar=ve();return w.createElement(ke.Provider,{value:$e},w.createElement(Qt,{value:ae},ar({ourProps:ir,theirProps:g,defaultTag:Zt,features:zt,visible:L==="visible",name:"Transition.Child"})))}s(Hn,"Fe");function Bn(e,t){let{show:r,appear:n=!1,unmount:o=!0,...i}=e,a=u.useRef(null),c=Xt(e),l=_e(...c?[a,t]:t===null?[]:[t]);Yt();let f=rt();if(r===void 0&&f!==null&&(r=(f&O.Open)===O.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=u.useState(r?"visible":"hidden"),y=Jt(()=>{r||m("hidden")}),[h,b]=u.useState(!0),v=u.useRef([r]);R(()=>{h!==!1&&v.current[v.current.length-1]!==r&&(v.current.push(r),b(!1))},[v,r]);let g=u.useMemo(()=>({show:r,appear:n,initial:h}),[r,n,h]);R(()=>{r?m("visible"):!Ae(y)&&a.current!==null&&m("hidden")},[r,y]);let E={unmount:o},F=I(()=>{var k;h&&b(!1),(k=e.beforeEnter)==null||k.call(e)}),T=I(()=>{var k;h&&b(!1),(k=e.beforeLeave)==null||k.call(e)}),N=ve();return w.createElement(ke.Provider,{value:y},w.createElement(Ne.Provider,{value:g},N({ourProps:{...E,as:u.Fragment,children:w.createElement(er,{ref:l,...E,...i,beforeEnter:F,beforeLeave:T})},theirProps:{},defaultTag:u.Fragment,features:zt,visible:p==="visible",name:"Transition"})))}s(Bn,"Ie$1");function Vn(e,t){let r=u.useContext(Ne)!==null,n=rt()!==null;return w.createElement(w.Fragment,null,!r&&n?w.createElement(Je,{ref:t,...e}):w.createElement(er,{ref:t,...e}))}s(Vn,"Le$1");let Je=ie(Bn),er=ie(Hn),Wn=ie(Vn),Un=Object.assign(Je,{Child:Wn,Root:Je});var yt;let Kn=(yt=w.startTransition)!=null?yt:function(e){e()};var Gn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Gn||{}),qn=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(qn||{});let Qn={0:e=>({...e,disclosureState:G(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},nt=u.createContext(null);nt.displayName="DisclosureContext";function ot(e){let t=u.useContext(nt);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ot),r}return t}s(ot,"M");let st=u.createContext(null);st.displayName="DisclosureAPIContext";function tr(e){let t=u.useContext(st);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,tr),r}return t}s(tr,"V");let it=u.createContext(null);it.displayName="DisclosurePanelContext";function Yn(){return u.useContext(it)}s(Yn,"ye");function Xn(e,t){return G(t.type,Qn,e,t)}s(Xn,"Pe");let Jn=u.Fragment;function Zn(e,t){let{defaultOpen:r=!1,...n}=e,o=u.useRef(null),i=_e(t,wn(v=>{o.current=v},e.as===void 0||Y(e.as))),a=u.useReducer(Xn,{disclosureState:r?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:c,buttonId:l},f]=a,p=I(v=>{f({type:1});let g=Rt(o.current);if(!g||!l)return;let E=v?ht(v)?v:"current"in v&&ht(v.current)?v.current:g.getElementById(l):g.getElementById(l);E?.focus()}),m=u.useMemo(()=>({close:p}),[p]),y=tt({open:c===0,close:p}),h={ref:i},b=ve();return w.createElement(nt.Provider,{value:a},w.createElement(st.Provider,{value:m},w.createElement(xn,{value:p},w.createElement(Qt,{value:G(c,{0:O.Open,1:O.Closed})},b({ourProps:h,theirProps:n,slot:y,defaultTag:Jn,name:"Disclosure"})))))}s(Zn,"Se");let zn="button";function eo(e,t){let r=u.useId(),{id:n=`headlessui-disclosure-button-${r}`,disabled:o=!1,autoFocus:i=!1,...a}=e,[c,l]=ot("Disclosure.Button"),f=Yn(),p=f===null?!1:f===c.panelId,m=u.useRef(null),y=_e(m,t,I(P=>{if(!p)return l({type:4,element:P})}));u.useEffect(()=>{if(!p)return l({type:2,buttonId:n}),()=>{l({type:2,buttonId:null})}},[n,l,p]);let h=I(P=>{var L;if(p){if(c.disclosureState===1)return;switch(P.key){case q.Space:case q.Enter:P.preventDefault(),P.stopPropagation(),l({type:0}),(L=c.buttonElement)==null||L.focus();break}}else switch(P.key){case q.Space:case q.Enter:P.preventDefault(),P.stopPropagation(),l({type:0});break}}),b=I(P=>{P.key===q.Space&&P.preventDefault()}),v=I(P=>{var L;$n(P.currentTarget)||o||(p?(l({type:0}),(L=c.buttonElement)==null||L.focus()):l({type:0}))}),{isFocusVisible:g,focusProps:E}=sn({autoFocus:i}),{isHovered:F,hoverProps:T}=on({isDisabled:o}),{pressed:N,pressProps:k}=pn({disabled:o}),he=tt({open:c.disclosureState===0,hover:F,active:N,disabled:o,focus:g,autofocus:i}),j=Tn(e,c.buttonElement),be=_t(p?{ref:y,type:j,disabled:o||void 0,autoFocus:i,onKeyDown:h,onClick:v}:{ref:y,id:n,type:j,"aria-expanded":c.disclosureState===0,"aria-controls":c.panelElement?c.panelId:void 0,disabled:o||void 0,autoFocus:i,onKeyDown:h,onKeyUp:b,onClick:v},E,T,k);return ve()({ourProps:be,theirProps:a,slot:he,defaultTag:zn,name:"Disclosure.Button"})}s(eo,"Ae");let to="div",ro=Pe.RenderStrategy|Pe.Static;function no(e,t){let r=u.useId(),{id:n=`headlessui-disclosure-panel-${r}`,transition:o=!1,...i}=e,[a,c]=ot("Disclosure.Panel"),{close:l}=tr("Disclosure.Panel"),[f,p]=u.useState(null),m=_e(t,I(F=>{Kn(()=>c({type:5,element:F}))}),p);u.useEffect(()=>(c({type:3,panelId:n}),()=>{c({type:3,panelId:null})}),[n,c]);let y=rt(),[h,b]=qt(o,f,y!==null?(y&O.Open)===O.Open:a.disclosureState===0),v=tt({open:a.disclosureState===0,close:l}),g={ref:m,id:n,...Gt(b)},E=ve();return w.createElement(Dn,null,w.createElement(it.Provider,{value:a.panelId},E({ourProps:g,theirProps:i,slot:v,defaultTag:to,features:ro,visible:h,name:"Disclosure.Panel"})))}s(no,"Re");let oo=ie(Zn),rr=ie(eo),so=ie(no),$t=Object.assign(oo,{Button:rr,Panel:so});const io="_productHeader_10ddt_40",ao="_productHeader__title_10ddt_51",lo="_productSearch_10ddt_63",uo="_productSearch__row_10ddt_67",co="_productSearch__input_10ddt_73",fo="_productSearch__btn_10ddt_87",po="_isLoading_10ddt_96",mo="_productListWrap__meta_10ddt_115",vo="_productListWrap__correction_10ddt_123",_o="_productListWrap__empty_10ddt_127",ho="_productList_10ddt_107",bo="_productTransitionEnter_10ddt_154",go="_productTransitionEnterFrom_10ddt_157",yo="_productTransitionEnterTo_10ddt_161",$o="_productTransitionLeave_10ddt_165",Eo="_productTransitionLeaveFrom_10ddt_168",wo="_productTransitionLeaveTo_10ddt_172",So="_productItem_10ddt_179",xo="_isAdded_10ddt_186",To="_productItem__row_10ddt_190",Io="_productItem__btn_10ddt_197",Po="_productItem__main_10ddt_213",Lo="_productItem__img_10ddt_220",jo="_productItem__imgStub_10ddt_221",Fo="_productItem__text_10ddt_236",Co="_productItem__titleRow_10ddt_241",Oo="_productItem__title_10ddt_241",Do="_productItem__badge_10ddt_265",No="_isOff_10ddt_277",ko="_productItem__sub_10ddt_281",Ao="_productItem__price_10ddt_294",Mo="_productItem__oldPrice_10ddt_298",Ro="_productItem__priceNow_10ddt_303",Ho="_productItem__brand_10ddt_307",Bo="_productItem__panel_10ddt_334",Vo="_productItem__dl_10ddt_339",Wo="_productItem__chips_10ddt_361",Uo="_productItem__chip_10ddt_361",$={productHeader:io,productHeader__title:ao,productSearch:lo,productSearch__row:uo,productSearch__input:co,productSearch__btn:fo,isLoading:po,productListWrap__meta:mo,productListWrap__correction:vo,productListWrap__empty:_o,productList:ho,productTransitionEnter:bo,productTransitionEnterFrom:go,productTransitionEnterTo:yo,productTransitionLeave:$o,productTransitionLeaveFrom:Eo,productTransitionLeaveTo:wo,productItem:So,isAdded:xo,productItem__row:To,productItem__btn:Io,productItem__main:Po,productItem__img:Lo,productItem__imgStub:jo,productItem__text:Fo,productItem__titleRow:Co,productItem__title:Oo,productItem__badge:Do,isOff:No,productItem__sub:ko,productItem__price:Ao,productItem__oldPrice:Mo,productItem__priceNow:Ro,productItem__brand:Ho,productItem__panel:Bo,productItem__dl:Vo,productItem__chips:Wo,productItem__chip:Uo};function Et(e){const t=(e??"").trim();if(!t)return"";const r=Number(t.replace(",","."));return Number.isFinite(r)?new Intl.NumberFormat("ru-RU",{maximumFractionDigits:2}).format(r):t}s(Et,"formatNumberLikePrice");function Ko(e){return e?.normal?.[0]||e?.small?.[0]||""}s(Ko,"resolveImageUrl");const Go=_.view("5ka:ProductItemVM",({viewModel:e,item:t})=>{const r=Ko(t.image_links),n=t.prices?.regular??"",o=t.prices?.discount??t.prices?.cpd_promo_price??"",i=!!(o&&n&&o!==n),a=Et(i?o:n)||o||n,c=i?Et(n)||n:"",l=t.is_available??!0,f=t.labels??[];return d.jsx("li",{className:[$.productItem,e.isAdded?$.isAdded:""].filter(Boolean).join(" "),children:d.jsx($t,{children:s(({open:p})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:$.productItem__row,children:d.jsx(rr,{className:$.productItem__btn,"aria-expanded":p,children:d.jsxs("div",{className:$.productItem__main,children:[r?d.jsx("img",{className:$.productItem__img,src:r,alt:""}):d.jsx("div",{className:$.productItem__imgStub,"aria-hidden":"true"}),d.jsxs("div",{className:$.productItem__text,children:[d.jsxs("div",{className:$.productItem__titleRow,children:[d.jsx("div",{className:$.productItem__title,children:t.name}),d.jsx("div",{className:[$.productItem__badge,l?"":$.isOff].filter(Boolean).join(" "),children:l?"В наличии":"Нет в наличии"})]}),d.jsxs("div",{className:$.productItem__sub,children:[d.jsx("span",{className:$.productItem__price,children:c?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:$.productItem__oldPrice,children:c})," ",d.jsx("span",{className:$.productItem__priceNow,children:a})]}):a}),t.property_clarification?d.jsxs("span",{className:$.productItem__brand,children:["· ",t.property_clarification]}):null]})]})]})})}),d.jsx(Un,{show:p,enter:$.productTransitionEnter,enterFrom:$.productTransitionEnterFrom,enterTo:$.productTransitionEnterTo,leave:$.productTransitionLeave,leaveFrom:$.productTransitionLeaveFrom,leaveTo:$.productTransitionLeaveTo,children:d.jsx($t.Panel,{className:$.productItem__panel,children:d.jsx("div",{className:$.productItem__details,children:d.jsxs("dl",{className:$.productItem__dl,children:[d.jsx("dt",{children:"PLU"}),d.jsx("dd",{children:t.plu}),t.uom?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Ед. измерения"}),d.jsx("dd",{children:t.uom})]}):null,t.step?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Шаг"}),d.jsx("dd",{children:t.step})]}):null,t.stock_limit?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Ограничение по остатку"}),d.jsx("dd",{children:t.stock_limit})]}):null,t.orange_loyalty_points!=null?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Баллы лояльности"}),d.jsx("dd",{children:t.orange_loyalty_points})]}):null,t.rating?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Рейтинг"}),d.jsxs("dd",{children:[t.rating.rating_average," · ",t.rating.rates_count," оценок"]})]}):null,t.price_piece_unit?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Цена за единицу"}),d.jsx("dd",{children:t.price_piece_unit})]}):null,f.length?d.jsxs(d.Fragment,{children:[d.jsx("dt",{children:"Метки"}),d.jsx("dd",{children:d.jsx("div",{className:$.productItem__chips,children:f.map(m=>d.jsx("span",{className:$.productItem__chip,style:{backgroundColor:m.bg_color,color:m.text_color,borderColor:m.bg_color},children:m.label},m.label))})})]}):null]})})})})]}),"children")})})}),qo=_.view("5ka:ProductListVM",({viewModel:e})=>{const t=!!e.lastQuery.trim();return d.jsxs(d.Fragment,{children:[t&&d.jsxs("div",{className:$.productListWrap__meta,"aria-live":"polite",children:["Найдено: ",d.jsx("strong",{children:e.items?.length}),e.correction?d.jsxs("span",{className:$.productListWrap__correction,children:[" ","· Возможно, вы имели в виду: ",d.jsx("strong",{children:e.correction})]}):null]}),d.jsx(d.Fragment,{children:e.resultCount===0?d.jsx("div",{className:$.productListWrap__empty,children:t?"Ничего не найдено":"Введите название товара и нажмите «Поиск»."}):d.jsx("ul",{className:$.productList,"aria-label":"Результаты поиска",children:e.items.map(r=>d.jsx(Go,{item:r},r.plu))})})]})}),Qo=_.view("5ka:SearchVM",({viewModel:e})=>e.hasExternalSearch?null:d.jsx("form",{className:$.productSearch,onSubmit:s(t=>{t.preventDefault(),e.search.execute()},"onSubmit"),children:d.jsxs("div",{className:$.productSearch__row,children:[d.jsx("input",{className:$.productSearch__input,value:e.parent.query,onChange:s(t=>e.updateQuery(t.target.value),"onChange"),placeholder:"Название товара","aria-label":"Название товара"}),d.jsx("button",{type:"submit",className:[$.productSearch__btn,e.search.isExecuting?$.isLoading:""].filter(Boolean).join(" "),disabled:!e.search.canExecute,"aria-label":"Искать",title:"Искать",children:"Поиск"})]})})),Yo=_.view("5ka:ProductVM",({viewModel:e})=>d.jsxs(d.Fragment,{children:[d.jsx("header",{className:$.productHeader,children:d.jsx("h1",{className:$.productHeader__title,children:"Товары"})}),d.jsx(Qo,{}),d.jsx(qo,{})]})),Xo={ru:{"lang.ru":"RU","lang.en":"EN","lang.label":"Язык"},en:{"lang.ru":"RU","lang.en":"EN","lang.label":"Language"}},Jo=u.createContext(null),nr="todo_lang";function Zo(){const e=localStorage.getItem(nr);return e==="ru"||e==="en"?e:navigator.language.toLowerCase().startsWith("ru")?"ru":"en"}s(Zo,"getInitialLang");function zo({children:e}){const[t,r]=u.useState(Zo),n=s(a=>{r(a),localStorage.setItem(nr,a),document.documentElement.lang=a},"setLang"),o=s(a=>Xo[t][a]??a,"t"),i=u.useMemo(()=>({lang:t,setLang:n,t:o}),[t]);return d.jsx(Jo.Provider,{value:i,children:e})}s(zo,"I18nProvider");const wt="microfront-style-5ka",St=new URL("../microfront.css",import.meta.url).href;function es(){if(!St||typeof document>"u"||document.querySelector(`link[data-microfront-style="${wt}"]`))return;const e=document.createElement("link");e.rel="stylesheet",e.href=St,e.dataset.microfrontStyle=wt,document.head.appendChild(e)}s(es,"ensureStyles");es();const as={id:"5ka",title:"5ka catalog",description:"Search, filter, and browse products."};function ls(){return d.jsx(w.StrictMode,{children:d.jsx(zo,{children:d.jsx(Yo,{})})})}s(ls,"MicrofrontRoot");export{ls as default,as as microfrontMeta};
//# sourceMappingURL=microfront-BZG5Hn4r.js.map
